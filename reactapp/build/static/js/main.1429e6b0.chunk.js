(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{36:function(e,t,a){e.exports=a(59)},41:function(e,t,a){},43:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},44:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(22),l=a.n(c),s=(a(41),a(3)),o=a.n(s),i=a(5),u=a(1),m=(a(43),a(44),a(17)),d=a(7),p=function(e){var t=Object(n.useState)([]),a=Object(u.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)(""),d=Object(u.a)(s,2),p=d[0],g=d[1];Object(n.useEffect)((function(){(function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/product").then((function(e){return e.json()})).then((function(e){return l(e.products)})).catch((function(e){return console.log("erreur fetch",e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var b=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=c.map((function(e,t){return r.a.createElement("span",{style:{float:"left"},className:"products",key:t},r.a.createElement("img",{onClick:function(e){console.log(e.target.id),b(e.target.id)},id:e._id,className:"productPic",src:e.img}),r.a.createElement("h4",null,e.name),r.a.createElement("span",null,r.a.createElement("h5",null,e.price,"\u20ac")))}));return""===p?r.a.createElement("div",{className:"blocProduct content"},E):r.a.createElement(m.a,{to:"/prodcard/".concat(p)})},g=a(2),b=function(e){var t=Object(n.useState)({name:"",price:0,type:"",enabled:!0}),a=Object(u.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)(!0),d=Object(u.a)(s,2),p=d[0],b=d[1],E=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),"/api/addproduct",e.next=4,fetch("/api/addproduct",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"name=".concat(c.name,"&price=").concat(c.price,"&type=").concat(c.type,"&enabled=").concat(c.enabled)}).then((function(e){return e.json()})).then((function(e){return r.a.createElement(m.a,{to:"/"})}));case 4:b(!1),console.log("j'ajoute ce produit : ",c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return p?r.a.createElement("div",{id:"form"},r.a.createElement("form",{className:"new-product"},r.a.createElement("h2",{style:{margin:30}},"Ajouter un produit"),r.a.createElement("div",{className:"form"},r.a.createElement("h5",{className:"inputname"},"Nom :"),r.a.createElement("input",{className:"Product-input",name:"name",placeholder:"Nom du produit",onChange:function(e){return l(Object(g.a)({},c,{name:e.target.value}))},value:c.name,required:!0}),r.a.createElement("h5",{className:"inputname"},"Prix :"),r.a.createElement("input",{type:"number",className:"Product-input",name:"price",placeholder:"Prix du produit",onChange:function(e){return l(Object(g.a)({},c,{price:e.target.value}))},value:c.price,required:!0}),r.a.createElement("h5",{className:"inputname"},"Type :"),r.a.createElement("input",{className:"Product-input",name:"type",placeholder:"Type de produit",onChange:function(e){return l(Object(g.a)({},c,{type:e.target.value}))},value:c.type,required:!0}),r.a.createElement("input",{className:"button",type:"submit",method:"post",value:"Ajouter Produit",onClick:function(e){return E(e)}})))):r.a.createElement(m.a,{to:"/"})},E=a(4);function h(e){return"undefined"===e||null===e||void 0===e||""===e}var f=function(e,t){var a=Object(n.useState)((function(){try{var a=window.localStorage.getItem(e);return a?JSON.parse(a):t}catch(n){return console.log(n),t}})),r=Object(u.a)(a,2),c=r[0],l=r[1];return[c,function(t){try{var a=t instanceof Function?t(c):t;l(a),window.localStorage.setItem(e,JSON.stringify(a))}catch(n){console.log(n)}}]};function N(e){if(null!=e&&e!=[]){for(var t=0,a=0;a<e.length;a++)t+=e[a].quantity;return t}return 0}function y(e){return"undefined"!==e&&null!==e&&void 0!==e&&""!==e&&!1!==e&&e!==[]}var v=Object(d.b)(null,(function(e){return{newUser:function(t){console.log("je suis dans le NEW USER REDUCER",t),e({type:"setUser",user:t})},newCount:function(t){console.log("je suis dans le NEW COUNT REDUCER",t),e({type:"setCount",count:t})},newBasket:function(t){console.log("je suis dans le NEW BASKET REDUCERS",t),e({type:"updateBasket",basket:t})},newOrder:function(t){console.log("je suis dans le NEW ORDER REDUCER",t),e({type:"setOrder",order:t})}}}))((function(e){var t=Object(n.useState)({firstname:"",lastname:"",email:"",password:""}),a=Object(u.a)(t,2),c=a[0],l=a[1],s=f("order",""),d=Object(u.a)(s,2),p=d[0],b=(d[1],f("guest","")),h=Object(u.a)(b,2),v=h[0],O=(h[1],Object(n.useState)({email:"",password:""})),j=Object(u.a)(O,2),w=j[0],C=j[1],S=Object(n.useState)(!1),k=Object(u.a)(S,2),x=k[0],I=k[1],T=Object(n.useState)(""),D=Object(u.a)(T,2),P=D[0],A=D[1];return x?r.a.createElement(m.a,{to:{pathname:"/",user:P}}):r.a.createElement("div",{className:"blocSignIn content"},r.a.createElement("form",{className:"form",onSubmit:function(t){return function(t){t.preventDefault();fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"email=".concat(w.email,"&password=").concat(w.password,"&orderID=").concat(p)}).then((function(e){return e.json()})).then((function(t){if(console.log("hello ======",t),t.status){(function(){var a=Object(i.a)(o.a.mark((function a(){return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,A(t.id);case 2:return a.next=4,localStorage.setItem("user",JSON.stringify(t.id));case 4:return a.next=6,localStorage.setItem("order",JSON.stringify(t.order));case 6:return a.next=8,localStorage.setItem("count",JSON.stringify(N(t.basket)));case 8:if(e.newUser(t.id),e.newOrder(t.order),e.newBasket(t.basket),e.newCount(N(t.basket)),!y(v)){a.next=15;break}return a.next=15,window.localStorage.removeItem("guest");case 15:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}})()(),I(!0)}else{alert("le mot de passe et l'email ne correspondent pas")}}))}(t)}},r.a.createElement("h2",null,"LOG IN"),r.a.createElement("span",{className:"logContent"},r.a.createElement("label",null,"Email"),r.a.createElement("input",{type:"email",className:"Login-input",name:"login_email",placeholder:"Votre email",onChange:function(e){return C(Object(g.a)({},w,{email:e.target.value}))},value:w.email,required:!0}),r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",className:"Login-input",name:"login_password",placeholder:"Votre mot de passe",onChange:function(e){return C(Object(g.a)({},w,{password:e.target.value}))},value:w.password,required:!0}),r.a.createElement(E.b,{className:"resetPass"},"Forgot your password ?")),r.a.createElement("input",{className:"button log",type:"submit",method:"post",value:"LOG IN"})),r.a.createElement("form",{className:"form",onSubmit:function(t){return function(t){t.preventDefault();fetch("/api/newuser",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"email=".concat(c.email,"&password=").concat(c.password,"&statut=user&orderID=").concat(p)}).then((function(e){return e.json()})).then((function(t){if(console.log("hello ============",t.status),t.status){(function(){var a=Object(i.a)(o.a.mark((function a(){return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,A(t.id);case 2:return a.next=4,localStorage.setItem("user",JSON.stringify(t.id));case 4:return a.next=6,e.newUser(t.id);case 6:if(!y(v)){a.next=9;break}return a.next=9,window.localStorage.removeItem("guest");case 9:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}})()(),I(!0)}else{alert("Un compte est d\xe9j\xe0 associ\xe9 \xe0 cet email")}}))}(t)}},r.a.createElement("h2",null,"REGISTER"),r.a.createElement("span",{className:"logContent"},r.a.createElement("h5",null,"If you still don't have a Squillace account, ",r.a.createElement("br",null),"use this registration form to join in."),r.a.createElement("label",null,"Email"),r.a.createElement("input",{type:"email",className:"Login-input",name:"login_email",placeholder:"Votre email",onChange:function(e){return l(Object(g.a)({},c,{email:e.target.value}))},value:c.email,required:!0}),r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",className:"Login-input",name:"login_password",placeholder:"Votre mot de passe",onChange:function(e){return l(Object(g.a)({},c,{password:e.target.value}))},value:c.password,required:!0})),r.a.createElement("input",{className:"button log",type:"submit",method:"post",value:"CREATE ACCOUNT"})))}));var O=Object(d.b)(null,(function(e){return{newUser:function(t){console.log("je suis dans le NEW USER REDUCER",t),e({type:"setUser",user:t})}}}))((function(e){return Object(n.useEffect)((function(){e.newUser(""),window.localStorage.removeItem("user")})),r.a.createElement("div",{className:"content"},r.a.createElement("form",{className:"form logoutBloc"},r.a.createElement("h2",null,"You're logged Out !"),r.a.createElement(E.b,{to:"/products"},"Back to Shopping"),r.a.createElement("img",{className:"slide logout",id:"homeSlide0",src:"homepic8.jpg"})))})),j=a(8),w=a(10),C=a(14);var S=Object(d.b)((function(e){return{userName:e.user}}),null)((function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)(!1),o=Object(u.a)(s,2),i=(o[0],o[1],Object(n.useState)(0)),m=Object(u.a)(i,2),d=(m[0],m[1],Object(n.useState)("")),p=Object(u.a)(d,2),g=(p[0],p[1]);Object(n.useEffect)((function(){var e=JSON.parse(window.localStorage.getItem("user"));console.log("user ==========",JSON.parse(window.localStorage.getItem("user"))),null!=e&&g(e)}),[]);var b=function(e){e.preventDefault(),l(!c)};return r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"title"},r.a.createElement(E.b,{to:"/",exact:!0},r.a.createElement("img",{className:"logo",src:"/logo.png"}))),r.a.createElement("div",{className:"linksWeb"},r.a.createElement("ul",{className:"lienweb"},r.a.createElement("li",{className:"linkHeader"},r.a.createElement(E.b,{to:"/about"},"About ")),r.a.createElement("li",{className:"linkHeader"},r.a.createElement(E.b,{to:"/collection"},"Collection")),r.a.createElement("li",{className:"linkHeader"},r.a.createElement(E.b,{to:"/products"},"Shop")),r.a.createElement("li",{className:"linkHeader"},r.a.createElement(E.b,{to:"/contact"},"Contact")),e.user?r.a.createElement("span",{className:"linkHeader"},r.a.createElement("li",{className:"linkHeader"},r.a.createElement(E.b,{to:"/myaccount"},"My Account"))):r.a.createElement("li",{className:"linkHeader"},r.a.createElement(E.b,{to:"/signin"},"Sign In")),r.a.createElement("li",{className:"linkHeader",onClick:function(e){return b(e)}},r.a.createElement(E.b,{to:"/cart"},r.a.createElement(j.a,{icon:C.b})," (",e.count,")")))),r.a.createElement("nav",{className:"linksMobil"},c?null:r.a.createElement(j.a,{icon:w.c,className:"fa-2x menuToogle",onClick:function(e){return b(e)}}),c?r.a.createElement(j.a,{icon:C.c,className:"fa-2x menuToogle",onClick:function(e){return b(e)}}):null,c?r.a.createElement("ul",{className:"is-expanded"},r.a.createElement("li",{className:"linkHeader",onClick:function(e){return b(e)}},r.a.createElement(E.b,{to:"/about"},"About ")),r.a.createElement("li",{className:"linkHeader",onClick:function(e){return b(e)}},r.a.createElement(E.b,{to:"/collection"},"Collection")),r.a.createElement("li",{className:"linkHeader",onClick:function(e){return b(e)}},r.a.createElement(E.b,{to:"/products"},"Shop")),r.a.createElement("li",{className:"linkHeader",onClick:function(e){return b(e)}},r.a.createElement(E.b,{to:"/contact"},"Contact")),e.user?r.a.createElement("li",{className:"linkHeader",onClick:function(e){return b(e)}},r.a.createElement(E.b,{to:"/myaccount"},"My Account")):r.a.createElement("li",{className:"linkHeader"},r.a.createElement(E.b,{to:"/signin"},"Sign In")),r.a.createElement("li",{className:"linkHeader",onClick:function(e){return b(e)}},r.a.createElement(E.b,{to:"/cart"},r.a.createElement(j.a,{icon:C.b})," (",e.count,")"))):null))})),k=function(e){var t=Object(n.useState)({id:"",name:"",price:0,type:""}),a=Object(u.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)([]),d=Object(u.a)(s,2),p=d[0],b=d[1],E=Object(n.useState)(!0),h=Object(u.a)(E,2),f=h[0],N=h[1];Object(n.useEffect)((function(){(function(){var t=Object(i.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/get-one-product?id=".concat(e.location.idProduct)).then((function(e){return e.json()})).then((function(e){l({id:e.products._id,name:e.products.name,price:e.products.price,type:e.products.type}),b(Object(g.a)({},p,{id:e.products._id}))})).catch((function(e){return console.log("erreur fetch",e)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]);return f?r.a.createElement("div",{id:"blocHome content"},r.a.createElement("div",null,r.a.createElement("div",{className:"products"},r.a.createElement("div",null,r.a.createElement("h3",null,c.name),r.a.createElement("h5",null,"Prix : ",c.price,"\u20ac"),r.a.createElement("h5",null,"Type de produit : ",c.type)),r.a.createElement("div",null,r.a.createElement("h5",null,"Remplacer le nom du produit par :"),r.a.createElement("input",{type:"text",className:"Product-input",name:"name",placeholder:c.name,onChange:function(e){return b(Object(g.a)({},p,{name:e.target.value}))},value:p.name}),r.a.createElement("h5",null,"Remplacer le prix du produit par :"),r.a.createElement("input",{type:"number",className:"Product-input",name:"price",placeholder:c.price,onChange:function(e){return b(Object(g.a)({},p,{price:e.target.value}))},value:p.price}),r.a.createElement("h5",null,"Remplacer le type du produit par :"),r.a.createElement("input",{type:"text",className:"Product-input",name:"type",placeholder:c.type,onChange:function(e){return b(Object(g.a)({},p,{type:e.target.value}))},value:p.type}),r.a.createElement("div",null,r.a.createElement("button",{className:"change-btn",onClick:function(e){e.target.value,fetch("/api/changeproduct",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"id=".concat(p.id,"&name=").concat(p.name,"&price=").concat(p.price,"&type=").concat(p.type)}).then((function(e){N(!1)})).catch((function(e){return console.log("erreur fetch",e)}))},value:c.id},"Modifier Produit")))))):r.a.createElement(m.a,{to:"/"})},x=a(34),I={duration:5e3,transitionDuration:500,infinite:!0,indicators:!0,arrows:!0},T=function(){var e=Object(n.useState)(["homepic.png","homepic1.jpg","homepic2.jpg","homepic3.jpg","homepic4.jpg","homepic5.jpg","homepic6.jpg"]),t=Object(u.a)(e,2),a=t[0],c=(t[1],a.map((function(e,t){return r.a.createElement("div",{className:"each-slide"},r.a.createElement("div",{className:"containerSlide"},r.a.createElement("img",{className:"slide",src:"home/".concat(e),alt:"img1"})))})));return r.a.createElement("div",null,r.a.createElement(x.Slide,I,c))};var D=Object(d.b)((function(e){return console.log("home page get user HOME",e),{userName:e.user}}),null)((function(e){var t=Object(n.useState)(["homepic.png","homepic1.jpg","homepic2.jpg","homepic3.jpg","homepic4.jpg","homepic5.jpg","homepic6.jpg"]),a=Object(u.a)(t,2),c=(a[0],a[1],Object(n.useState)(0)),l=Object(u.a)(c,2);l[0],l[1];return r.a.createElement("div",{style:{paddingTop:90}},r.a.createElement(T,null),r.a.createElement("div",{className:"footer"},r.a.createElement("a",{href:"https://www.facebook.com/martina.squillacedesigner",target:"_blanck",alt:""},r.a.createElement("img",{src:"logofbk.png",className:"socMedia",alt:""})),r.a.createElement("a",{href:"https://www.pinterest.it/martinasquillac/",target:"_blanck",alt:""},r.a.createElement("img",{src:"logopinterest.png",className:"socMedia",alt:""})),r.a.createElement("a",{href:"https://www.instagram.com/martinasquillace/?hl=fr",target:"_blanck",alt:""},r.a.createElement("img",{src:"logoinsta.png",className:"socMedia",alt:""})),r.a.createElement("a",{href:"/contact",target:"_blanck",alt:""},r.a.createElement("img",{src:"logomail.png",className:"socMedia",alt:""}))))})),P=function(e){return r.a.createElement("div",{className:"about content"},r.a.createElement("div",{className:"aboutSub"},r.a.createElement("img",{className:"aboutPic",src:"martina.jpg",alt:""})),r.a.createElement("div",{className:"aboutSub"},r.a.createElement("h5",{className:"aboutText"},"Martina Squillace is an Italian Art Director and Stylist based in Paris.",r.a.createElement("br",null),r.a.createElement("br",null),"After her fashion design studies she has worked with numerous brands troughtout design and commercial departements, where she learned the importance of visual communication, which has become her passion and her work through styling and art direction.",r.a.createElement("br",null),r.a.createElement("br",null),"Her style, which is characterized by a savage instinct and also an elegant attitude, is the result of continuous cultural and spiritual research.")))},A=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)(["fw19/1.jpg","fw19/2.jpg","fw19/3.jpg","fw19/4.jpg","fw19/5.jpg","fw19/6.jpg","fw19/7.jpg","fw19/8.jpg","fw19/9.jpg","fw19/10.jpg","fw19/11.jpg","fw19/12.jpg","fw19/13.jpg","fw19/14.jpg","fw19/15.jpg","fw19/16.jpg"]),o=Object(u.a)(s,2),i=o[0],m=(o[1],Object(n.useState)(["ss20/1.jpg","ss20/2.jpg","ss20/3.jpg","ss20/4.jpg","ss20/5.jpg","ss20/6.jpg","ss20/7.jpg","ss20/8.jpg","ss20/9.jpg","ss20/10.jpg","ss20/11.jpg","ss20/12.jpg","ss20/13.jpg","ss20/14.jpg","ss20/15.jpg","ss20/16.jpg"])),d=Object(u.a)(m,2),p=d[0],g=(d[1],i.map((function(e,t){return r.a.createElement("img",{className:"collecPic",src:e,alt:""})}))),b=p.map((function(e,t){return r.a.createElement("img",{className:"collecPic",src:e,alt:""})}));return r.a.createElement("div",{className:"collection content"},r.a.createElement("div",{className:"collecSeason"},r.a.createElement("h5",{className:"season",value:"fw19",onClick:function(e){l(!0)}},"Fall/Winter 19"),r.a.createElement(j.a,{className:"season",icon:w.d}),r.a.createElement("h5",{className:"season",value:"ss20",onClick:function(e){l(!1)}},"Spring/Summer 20")),c?r.a.createElement("div",null,g):r.a.createElement("div",null,b))};var R=function(e){return Math.round(1e3*e)/1e3};var B=Object(d.b)((function(e){return{basket:e.basket}}),(function(e){return{newCount:function(t){console.log("je suis dans le NEW COUNT REDUCER",t),e({type:"setCount",count:t})},newBasket:function(t){console.log("je suis dans le NEW BASKET REDUCERS",t),e({type:"updateBasket",basket:t})}}}))((function(e){var t=Object(n.useState)([]),a=Object(u.a)(t,2),c=a[0],l=a[1],s=f("guest",""),m=Object(u.a)(s,2),d=m[0],p=(m[1],f("order","")),g=Object(u.a)(p,2),b=g[0],h=(g[1],f("user","")),v=Object(u.a)(h,2),O=v[0],C=(v[1],Object(n.useState)(0)),S=Object(u.a)(C,2),k=S[0],x=S[1],I=Object(n.useState)(0),T=Object(u.a)(I,2),D=T[0],P=T[1],A=Object(n.useState)(""),B=Object(u.a)(A,2);B[0],B[1];Object(n.useEffect)((function(){(function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/cart",e.next=3,fetch("/api/cart",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"orderID=".concat(b)}).then((function(e){return e.json()})).then((function(e){e.status?(l(e.basket),console.log("je verifie que je recupere le bon panier: ",e.basket),x(e.totalCart),P(N(e.basket))):console.log("erreur")})).catch((function(e){return console.log("erreur fetch",e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var z=function(){var t=Object(i.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"/api/delete-product-from-order",t.next=3,fetch("/api/delete-product-from-order",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"orderID=".concat(b,"&_id=").concat(a)}).then((function(e){return e.json()})).then((function(t){!0===t.status?(console.log("je verifie le retour du back : ",t),l(t.basket),x(t.totalCart),P(N(t.basket)),e.newBasket(t.basket),e.newCount(N(t.basket)),localStorage.setItem("count",JSON.stringify(N(t.basket)))):console.log("error")}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),L=function(){var t=Object(i.a)(o.a.mark((function t(a,n,r){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(a,n,r),"/api/update-qty-to-order",t.next=4,fetch("/api/update-qty-to-order",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"orderID=".concat(b,"&_id=").concat(n,"&qty=").concat(a,"&size=").concat(r)}).then((function(e){return e.json()})).then((function(t){t.status?(console.log("je verifie que mes prix concordent ici le retour du back : ",t),l(t.basket),x(t.totalCart),P(N(t.basket)),e.newBasket(t.basket),e.newCount(N(t.basket)),localStorage.setItem("count",JSON.stringify(N(t.basket)))):(l([]),console.log("error"))}));case 4:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),q=c.map((function(e,t){return r.a.createElement("div",{className:"productsCart",key:t},r.a.createElement("div",{className:"productsCartPicTitle"},r.a.createElement("img",{className:"collecPic cartPic",src:e.img}),r.a.createElement("h5",{className:"productsNameCart"},e.name)),r.a.createElement("div",{className:"productsCartSub"},r.a.createElement("div",null,r.a.createElement("h5",{className:"productsDetailL"},"Price :"),r.a.createElement("h5",{className:"productsDetailR"},e.price/e.quantity,"\u20ac")),r.a.createElement("div",null,r.a.createElement("h5",{className:"productsDetailL"},"Size :"),r.a.createElement("h5",{className:"productsDetailR"},e.size)),r.a.createElement("div",{className:"productsQty"},r.a.createElement("h5",{className:"productsDetailL"},"Quantity :"),r.a.createElement("div",{className:"productsDetailRQty"},r.a.createElement(j.a,{icon:w.e,className:"qty-btn less",onClick:function(t){return L("less",e._id,e.size)}}),r.a.createElement("h5",{className:"productsDetailQty"},e.quantity," "),r.a.createElement(j.a,{icon:w.f,className:"qty-btn add",onClick:function(t){return L("add",e._id,e.size)}})))),r.a.createElement("h5",{className:"productsTotalPrice"},"Total : ",e.price,"\u20ac"),r.a.createElement("i",{class:"far fa-trash-alt"}),r.a.createElement(j.a,{className:"delete-btn",icon:w.g,onClick:function(t){return z(e._id)},value:e._id}))}));return c.length>0?r.a.createElement("div",{className:"Cart content"},r.a.createElement("div",{className:"blocCart"},q),r.a.createElement("div",{className:"totalCart",style:{display:"flex",justifyContent:"space-around"}},r.a.createElement("h5",{className:"marg"},"SHOPPING BAG TOTAL (",D," items)"),y(O)?null:r.a.createElement("div",null,r.a.createElement("h5",{className:"marg"},"Log in to order with your account"),r.a.createElement(E.b,{to:"/login",className:"cartLink"},r.a.createElement("button",{className:"btnCart"},"SIGN IN"))),r.a.createElement("div",{className:"totalCartElments"},r.a.createElement("div",{className:"totalCartElmt L"},r.a.createElement("h5",{className:"marg"},"Order value :"),r.a.createElement("h5",{className:"marg"},"Shipping :"),r.a.createElement("h5",{className:"marg"},"TOTAL :")),r.a.createElement("div",{className:"totalCartElmt R"},r.a.createElement("h5",{className:"marg"},R(k),"\u20ac"),r.a.createElement("h5",{className:"marg"},"FREE"),r.a.createElement("h5",{className:"marg"},R(k),"\u20ac"))),r.a.createElement(E.b,{to:y(O)||y(d)?"/payment":"/checkout",className:"cartLink"},r.a.createElement("button",{className:"btnCart checkBtn"},"CONTINUE TO CHECKOUT")))):r.a.createElement("div",{className:"content",style:{flexDirection:"column",margin:20}},r.a.createElement("h3",{className:"emptyCart"},"YOUR SHOPPING BAG IS EMPTY!",r.a.createElement("br",null),r.a.createElement("br",null),"Sign in to save or access saved items in your shopping bag."),r.a.createElement(E.b,{to:"/signin"},r.a.createElement("h3",{style:{margin:20}},"Sign In")),r.a.createElement("img",{className:"emptyCartPic",src:"homepic.png"}))})),z=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)(!1),o=Object(u.a)(s,2),i=o[0],d=o[1];return c?r.a.createElement(m.a,{to:"/products"}):i?r.a.createElement(m.a,{to:"/cart"}):r.a.createElement("div",{className:"popup"},r.a.createElement("div",{className:"popupinner"},r.a.createElement("h4",null,e.text),r.a.createElement("p",null,"was successfully added to your shopping cart"),r.a.createElement("div",null,r.a.createElement("button",{className:"checkInOut",onClick:function(){l(!0)}},"CONTINUE SHOPPING"),r.a.createElement("button",{className:"checkInOut",onClick:function(){d(!0)}},"CHECKOUT"))))};var L=Object(d.b)(null,(function(e){return{newCount:function(t){console.log("je suis dans le NEW COUNT REDUCER",t),e({type:"setCount",count:t})},newBasket:function(t){console.log("je suis dans le NEW BASKET REDUCERS",t),e({type:"updateBasket",basket:t})},newOrder:function(t){console.log("je suis dans le NEW ORDER REDUCER",t),e({type:"setOrder",order:t})}}}))((function(e){var t=f("user",[]),a=Object(u.a)(t,2),c=a[0],l=(a[1],f("order","")),s=Object(u.a)(l,2),m=s[0],d=(s[1],Object(n.useState)({id:"",name:"",price:0,type:"",img:""})),p=Object(u.a)(d,2),b=p[0],E=p[1],h=Object(n.useState)([]),v=Object(u.a)(h,2),O=v[0],C=v[1],S=Object(n.useState)({productID:"",name:"",price:0,type:"",img:"",quantity:1,size:""}),k=Object(u.a)(S,2),x=k[0],I=k[1],T=Object(n.useState)(!1),D=Object(u.a)(T,2),P=D[0],A=D[1];Object(n.useEffect)((function(){(function(){var t=Object(i.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"/api/get-one-product",t.next=3,fetch("/api/get-one-product",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"id=".concat(e.match.params.id,"&orderID=").concat(m)}).then((function(e){return e.json()})).then((function(e){console.log("retour de get one",e),E({productID:e.products._id,name:e.products.name,price:e.products.price,description:e.products.description,type:e.products.type,img:e.products.img}),I(Object(g.a)({},x,{productID:e.products._id,name:e.products.name,type:e.products.type,description:e.products.description,img:e.products.img,price:e.products.price})),null===e.orderID?C(null):(console.log("ce que jenregistre comme panier en cours",e.basket),C(e.basket))})).catch((function(e){return console.log("erreur fetch",e)}));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]);var R=function(){var t=Object(i.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),!y(O)){t.next=7;break}return"/api/add-product-to-order",t.next=5,fetch("/api/add-product-to-order",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"id=".concat(c,"&orderID=").concat(m,"&tempStore=").concat(JSON.stringify(x))}).then((function(e){return e.json()})).then((function(t){console.log("retour du back === ",t),t.status?(localStorage.setItem("order",JSON.stringify(t.orderID)),localStorage.setItem("count",JSON.stringify(N(t.basket))),e.newOrder(t.orderID),e.newBasket(t.basket),e.newCount(N(t.basket)),A(!P)):console.log("erreur")}));case 5:t.next=10;break;case 7:return"/api/createorder",t.next=10,fetch("/api/createorder",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"id=".concat(c,"&productID=").concat(x.productID,"&name=").concat(x.name,"&price=").concat(x.price,"&type=").concat(x.type,"&img=").concat(x.img,"&quantity=").concat(x.quantity,"&size=").concat(x.size)}).then((function(e){return e.json()})).then((function(t){(console.log("retour du back === ",t.status),t.status)?function(){var a=Object(i.a)(o.a.mark((function a(){return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,localStorage.setItem("order",JSON.stringify(t.orderID));case 2:return a.next=4,localStorage.setItem("count",JSON.stringify(N(t.basket)));case 4:return a.next=6,e.newOrder(t.orderID);case 6:return a.next=8,e.newBasket(t.basket);case 8:return a.next=10,e.newCount(N(t.basket));case 10:A(!P);case 11:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}()():console.log("erreur")}));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"content"},r.a.createElement("a",{href:"/products",className:"backToSearch"},r.a.createElement(j.a,{className:"backArrow",icon:w.a}),r.a.createElement("h5",{className:"backCollec"},"Back to Collection")),r.a.createElement("div",{className:"productCard"},r.a.createElement("img",{className:"productsPic",src:"/".concat(b.img)}),P?r.a.createElement(z,{text:b.name}):null,r.a.createElement("div",{className:"productsText"},r.a.createElement("h3",null,b.name),r.a.createElement("div",null,r.a.createElement("h5",null,b.price,"\u20ac"),r.a.createElement("h5",null,b.type),r.a.createElement("h5",null,b.description),r.a.createElement("form",{onSubmit:function(e){return R(e)},value:"Add to cart"},r.a.createElement("label",{className:"sizeInput"},"Size : "),r.a.createElement("select",{onChange:function(e){return I(Object(g.a)({},x,{size:e.target.value}))},required:!0},r.a.createElement("option",{value:""},"--"),r.a.createElement("option",{value:"S"},"S"),r.a.createElement("option",{value:"M"},"M"),r.a.createElement("option",{value:"L"},"L")),r.a.createElement("input",{type:"submit",className:"add-btn",value:"Add to Cart"}))))))})),q=function(){var e=Object(n.useState)({name:"",email:"",message:""}),t=Object(u.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!1),s=Object(u.a)(l,2),o=s[0],i=s[1];return o?r.a.createElement(m.a,{to:"/"}):r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"contactTitle",style:{height:60}},r.a.createElement("h3",{style:{fontSize:20,marginLeft:20}},"Contact Us")),r.a.createElement("div",{className:"contactBloc"},r.a.createElement("img",{className:"contactPic",src:"contact.jpg",alt:""}),r.a.createElement("form",{className:"contactForm",onSubmit:function(e){return function(e){e.preventDefault(),console.log("envoi formulaire",a),fetch("/api/contact",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"name=".concat(a.name,"&email=").concat(a.email,"&message=").concat(a.message)}).then((function(e){console.log("this message is saved",e),i(!0)})).catch((function(e){console.log("error",e)}))}(e)}},r.a.createElement("input",{className:"inputForm",type:"text",placeholder:"Name",onChange:function(e){return c(Object(g.a)({},a,{name:e.target.value}))},required:!0}),r.a.createElement("input",{className:"inputForm",type:"email",placeholder:"Email",onChange:function(e){return c(Object(g.a)({},a,{email:e.target.value}))},required:!0}),r.a.createElement("textarea",{className:"inputForm inputArea",placeholder:"Message",onChange:function(e){return c(Object(g.a)({},a,{message:e.target.value}))},required:!0}),r.a.createElement("button",{className:"contactButton",type:"submit"},"Send"))))};var U=Object(d.b)((function(e){return console.log("home page get user",e.basket),{prodList:e.basket}}),(function(e){return{newUser:function(t){console.log("je suis dans le NEW USER REDUCER",t),e({type:"setUser",user:t})},newCount:function(t){console.log("je suis dans le NEW COUNT REDUCER",t),e({type:"setCount",count:t})},newBasket:function(t){console.log("je suis dans le NEW BASKET REDUCERS",t),e({type:"updateBasket",basket:t})},newOrder:function(t){console.log("je suis dans le NEW ORDER REDUCER",t),e({type:"setOrder",order:t})}}}))((function(e){var t=f("user",""),a=Object(u.a)(t,2),c=a[0],l=(a[1],f("order","")),s=Object(u.a)(l,2),d=s[0],p=(s[1],Object(n.useState)({firstname:"",lastname:"",email:"",password:""})),b=Object(u.a)(p,2),h=b[0],v=b[1],O=Object(n.useState)({email:"",password:""}),j=Object(u.a)(O,2),w=j[0],C=j[1],S=Object(n.useState)(!1),k=Object(u.a)(S,2),x=k[0],I=k[1],T=Object(n.useState)({guest_id:"",status:!1}),D=Object(u.a)(T,2),P=D[0],A=(D[1],Object(n.useState)()),R=Object(u.a)(A,2),B=R[0],z=R[1];Object(n.useEffect)((function(){console.log("je recois quoi ? ?? ",e.prodList),function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/get-user-from-order",e.next=3,fetch("/api/get-user-from-order",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"orderID=".concat(d,"&userID=").concat(c)}).then((function(e){return e.json()})).then(function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y(t.userEmail)?(console.log("retour checkout",t),C(Object(g.a)({},w,{email:t.userEmail})),z(!0)):z(!1);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]);return x?r.a.createElement(m.a,{to:{pathname:"/payment",user:{id:P.guest_id,status:"user"}}}):r.a.createElement("div",{className:"blocCheckout"},r.a.createElement("form",{className:B?"form loginCheckoutBIG":"form loginCheckout",onSubmit:function(t){return function(t){t.preventDefault();fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"email=".concat(w.email,"&password=").concat(w.password,"&orderID=").concat(d)}).then((function(e){return e.json()})).then((function(t){if(console.log("hello ======",t),t.status){(function(){var a=Object(i.a)(o.a.mark((function a(){return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,localStorage.setItem("user",JSON.stringify(t.id));case 2:return a.next=4,localStorage.setItem("order",JSON.stringify(t.order));case 4:return a.next=6,localStorage.setItem("count",JSON.stringify(N(t.basket)));case 6:e.newUser(t.id),e.newOrder(t.order),e.newBasket(t.basket),e.newCount(N(t.basket));case 10:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}})()(),I(!0)}else{alert("le mot de passe et l'email ne correspondent pas")}}))}(t)}},B?r.a.createElement("h2",null,"Welcome Back ! ",r.a.createElement("br",null),r.a.createElement("br",null),"Log In"):r.a.createElement("h2",null,"LOG IN"),r.a.createElement("span",{className:"logContent"},r.a.createElement("label",null,"Email"),r.a.createElement("input",{className:"Login-input",name:"login_email",placeholder:"Votre email",onChange:function(e){return C(Object(g.a)({},w,{email:e.target.value}))},value:w.email,required:!0}),r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",className:"Login-input",name:"login_password",placeholder:"Votre mot de passe",onChange:function(e){return C(Object(g.a)({},w,{password:e.target.value}))},value:w.password,required:!0}),r.a.createElement(E.b,{className:"resetPass"},"Forgot your password ?")),r.a.createElement("input",{className:"button log",type:"submit",method:"post",value:"LOG IN"})),B?null:r.a.createElement("form",{className:"form loginCheckout",onSubmit:function(t){return function(t){t.preventDefault();fetch("/api/newuser",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"email=".concat(h.email,"&password=").concat(h.password,"&statut=user&orderID=").concat(d)}).then((function(e){return e.json()})).then((function(t){if(console.log("hello ============",t.status),t.status){(function(){var a=Object(i.a)(o.a.mark((function a(){return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,localStorage.setItem("user",JSON.stringify(t.id));case 2:e.newUser(t.id);case 3:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}})()(),I(!0)}else{alert("Un compte est d\xe9j\xe0 associ\xe9 \xe0 cet email")}}))}(t)}},r.a.createElement("h2",null,"REGISTER"),r.a.createElement("span",{className:"logContent"},r.a.createElement("h5",null,"If you still don't have a Squillace account, ",r.a.createElement("br",null),"use this registration form to join in."),r.a.createElement("label",null,"Email"),r.a.createElement("input",{type:"email",className:"Login-input",name:"login_email",placeholder:"Votre email",onChange:function(e){return v(Object(g.a)({},h,{email:e.target.value}))},value:h.email,required:!0}),r.a.createElement("label",null,"Password"),r.a.createElement("input",{type:"password",className:"Login-input",name:"login_password",placeholder:"Votre mot de passe",onChange:function(e){return v(Object(g.a)({},h,{password:e.target.value}))},value:h.password,required:!0})),r.a.createElement("input",{className:"button log",type:"submit",method:"post",value:"CREATE ACCOUNT"})),r.a.createElement("form",{className:"form guestCheckout"},r.a.createElement("h2",null,"SHOP AS GUEST"),r.a.createElement("span",{className:"logContent"},"You can complete your purchase as a guest, but you will need to fill out your details to place your order.",r.a.createElement("br",null),"You will be able to register and save your details for future purchases at the end of the order process."),r.a.createElement(E.b,{to:"/shippinginfo",className:"cartLink"},r.a.createElement("input",{className:"button log",type:"submit",method:"post",value:"CONTINUE AS GUEST"})),B?r.a.createElement("div",null,r.a.createElement("h2",null,"NEW CUSTOMER"),r.a.createElement("span",{className:"logContent"},"Create a new account"),r.a.createElement("input",{className:"button log",type:"submit",method:"post",onClick:function(e){return z(!1)},value:"CREATE ACCOUNT"})):null))}));var H=Object(d.b)((function(e){return console.log("home page get user",e.basket),{basket:e.basket}}),null)((function(e){var t=f("order",""),a=Object(u.a)(t,2),c=a[0],l=(a[1],Object(n.useState)([])),s=Object(u.a)(l,2),d=(s[0],s[1]),p=Object(n.useState)("nonUser"),b=Object(u.a)(p,2),h=b[0],y=b[1],v=Object(n.useState)({firstname:"",lastname:"",address:"",optional:"",zipcode:"",city:"",state:"",phone:"Phone",newsletter:!0,email:""}),O=Object(u.a)(v,2),j=O[0],w=O[1],C=Object(n.useState)({guest_id:"",status:!1}),S=Object(u.a)(C,2),k=S[0],x=S[1],I=Object(n.useState)(0),T=Object(u.a)(I,2),D=T[0],P=T[1],A=Object(n.useState)(0),R=Object(u.a)(A,2),B=R[0],z=R[1];Object(n.useEffect)((function(){(function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/cart",e.next=3,fetch("/api/cart",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"orderID=".concat(c)}).then((function(e){return e.json()})).then((function(e){e.status?(d(e.basket),console.log("je verifie que je recupere le bon panier: ",e.basket),P(e.totalCart),z(N(e.basket))):console.log("erreur")})).catch((function(e){return console.log("erreur fetch",e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);return k.status?r.a.createElement(m.a,{to:{pathname:"/payment",user:{id:k.guest_id,status:"guest"}}}):r.a.createElement("div",{className:"ShipBloc content"},r.a.createElement("form",{className:"checkOutForm",onSubmit:function(e){return function(e){console.log("send guest",j),e.preventDefault();fetch("/api/addguest",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"orderID=".concat(c,"&firstname=").concat(j.firstname,"&lastname=").concat(j.lastname,"&address=").concat(j.address,"&optional=").concat(j.optional,"&zipcode=").concat(j.zipcode,"&city=").concat(j.city,"&state=").concat(j.state,"&newsletter=").concat(j.newsletter,"&email=").concat(j.email)}).then((function(e){return e.json()})).then(function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("retour du back shipping info === ",t),!t.status){e.next=7;break}return e.next=4,localStorage.setItem("guest",JSON.stringify(t.guestID));case 4:x({guest_id:t.guestID,status:t.status}),e.next=8;break;case 7:y("userExistAlready");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}(e)}},r.a.createElement("div",{className:"shipForm"},r.a.createElement("input",{className:"checkoutInput",name:"firstname",type:"text",placeholder:"First Name",onChange:function(e){return w(Object(g.a)({},j,{firstname:e.target.value}))},value:j.firstname,required:!0}),r.a.createElement("input",{className:"checkoutInput",name:"lastname",type:"text",placeholder:"Last Name",onChange:function(e){return w(Object(g.a)({},j,{lastname:e.target.value}))},value:j.lastname,required:!0})),r.a.createElement("div",{className:"shipForm"},r.a.createElement("input",{className:"checkoutInput",name:"Address",type:"text",placeholder:"Address",onChange:function(e){return w(Object(g.a)({},j,{address:e.target.value}))},value:j.address,required:!0}),r.a.createElement("input",{className:"checkoutInput",name:"address2",type:"text",placeholder:"Optional",onChange:function(e){return w(Object(g.a)({},j,{optional:e.target.value}))},value:j.optional})),r.a.createElement("div",{className:"shipForm"},r.a.createElement("input",{className:"checkoutInput",name:"ZIP Code",placeholder:"ZIP Code",type:"text",pattern:"[0-9]*",onChange:function(e){return w(Object(g.a)({},j,{zipcode:e.target.value}))},value:j.zipcode,required:!0}),r.a.createElement("input",{className:"checkoutInput",name:"city",type:"text",placeholder:"City/Town",onChange:function(e){return w(Object(g.a)({},j,{city:e.target.value}))},value:j.city,required:!0})),r.a.createElement("div",{className:"shipForm"},r.a.createElement("input",{className:"checkoutInput",name:"state",type:"text",placeholder:"State",onChange:function(e){return w(Object(g.a)({},j,{state:e.target.value}))},value:j.state,required:!0}),r.a.createElement("input",{className:"checkoutInput",name:"phone",type:"tel",placeholder:"Phone",onChange:function(e){return w(Object(g.a)({},j,{phone:e.target.value}))},pattern:"^[0-9]{10}$",value:j.phone,required:!0})),r.a.createElement("div",{className:"shipForm"},r.a.createElement("input",{className:"checkoutInput",name:"email",type:"email",placeholder:"Email",onChange:function(e){return w(Object(g.a)({},j,{email:e.target.value}))},value:j.email,required:!0})),r.a.createElement("div",{className:"shipCheckbox"},r.a.createElement("input",{className:"checkboxInput",name:"Checkbox",type:"checkbox",onChange:function(e){w(Object(g.a)({},j,{newsletter:e.target.checked}))},value:j.newsletter}),r.a.createElement("label",null,"I wish to receive Squillace's newsletter")),r.a.createElement("div",{className:"shipForm ".concat(h)},r.a.createElement("h5",{className:"logLink"},"There is already an account associated with this email, please : "),r.a.createElement(E.b,{className:"logLink2",to:"/checkout"},"Log In")),r.a.createElement("input",{className:"button log",name:"Checkout",type:"submit",value:"CONTINUE"})),r.a.createElement("div",{className:"totalCartship",style:{display:"flex",justifyContent:"space-around"}},r.a.createElement("h5",{className:"h5marg"},"SHOPPING BAG TOTAL (",B," items)"),r.a.createElement("h5",{className:"h5marg"},"Log in to order with your account"),r.a.createElement(E.b,{to:"/login",className:"cartLink"},r.a.createElement("button",{className:"btnCart"},"SIGN IN")),r.a.createElement("div",{className:"totalCartElments"},r.a.createElement("div",{className:"totalCartElmt L"},r.a.createElement("h5",{className:"h5marg"},"Order value :"),r.a.createElement("h5",{className:"h5marg"},"Shipping :"),r.a.createElement("h5",{className:"h5marg"},"TOTAL :")),r.a.createElement("div",{className:"totalCartElmt R"},r.a.createElement("h5",{className:"h5marg"},D,"\u20ac"),r.a.createElement("h5",{className:"h5marg"},"FREE"),r.a.createElement("h5",{className:"h5marg"},D,"\u20ac")))))}));function F(e){var t=new Date(e),a=t.getDate(),n=t.getMonth()+1,r=t.getFullYear();return a<10&&n<10?"0".concat(a,"/0").concat(n,"/").concat(r):a<10?"0".concat(a,"/").concat(n,"/").concat(r):n<10?"".concat(a,"/0").concat(n,"/").concat(r):"".concat(a,"/").concat(n,"/").concat(r)}var W=Object(d.b)((function(e){return console.log("Account get user",e.user),{name:e.user}}),null)((function(e){var t=f("user",[]),a=Object(u.a)(t,2),c=a[0],l=(a[1],Object(n.useState)({firstname:"",lastname:"",email:""})),s=Object(u.a)(l,2),m=s[0],d=s[1],p=Object(n.useState)([]),g=Object(u.a)(p,2),b=g[0],h=g[1],v=Object(n.useState)(!1),O=Object(u.a)(v,2),C=O[0],S=O[1];Object(n.useEffect)((function(){(function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"/api/myaccount",fetch("/api/myaccount",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"id=".concat(c)}).then((function(e){return e.json()})).then((function(e){console.log("retour du back === ",e.user.firstname),d({firstname:e.user.firstname,lastname:e.user.lastname,email:e.user.email}),h(e.orders),void 0!=e.user.firstname&&S(!0)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var k=function(){var e=Object(i.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("id a afficher",t,a),document.getElementById("".concat(a)).className="showOrderDetails",document.getElementById("bloc".concat(a)).className="orderCardExpand",document.getElementById("img".concat(a)).className="hide",document.getElementById("show".concat(a)).className="hide",document.getElementById("OrderInfo".concat(a)).className="hide",document.getElementById("showless".concat(a)).className="displayOrder",document.getElementById("fullOrderInfo".concat(a)).className="fullOrderInfo",document.getElementById("OrderTitle".concat(a)).className="orderTitles";case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),x=function(){var e=Object(i.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("id a afficher",t,a),document.getElementById("".concat(a)).className="hide",document.getElementById("bloc".concat(a)).className="orderCard",document.getElementById("showless".concat(a)).className="hide",document.getElementById("fullOrderInfo".concat(a)).className="hide",document.getElementById("OrderTitle".concat(a)).className="hide",document.getElementById("img".concat(a)).className="accountPic",document.getElementById("show".concat(a)).className="displayOrder",document.getElementById("OrderInfo".concat(a)).className="orderDetails";case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),I=b.map((function(e,t){var a=e.productList.map((function(e,t){return r.a.createElement("div",{className:"productListAccount"},r.a.createElement("img",{className:"accountPic",src:e.img}),r.a.createElement("div",{className:"prodListDetail"},r.a.createElement("h5",{style:{fontWeight:"bold"}},e.name),r.a.createElement("h5",null,e.size),r.a.createElement("h5",null,e.price/e.quantity,"\u20ac"),r.a.createElement("h5",null,"Quantity : ",e.quantity),r.a.createElement("div",{className:"prodListDetailPrice"},r.a.createElement("h5",{style:{fontWeight:"bold"}},e.price,"\u20ac"))))}));return r.a.createElement("div",{className:"orderCard",id:"bloc".concat(t)},r.a.createElement("img",{className:"accountPic",id:"img".concat(t),src:e.productList[0].img}),r.a.createElement("span",{className:"orderCardSub"},r.a.createElement("div",{className:"hide",onClick:function(a){return x(e._id,t)},id:"showless".concat(t)},r.a.createElement("h5",{className:"showdetail"},"Show less"),r.a.createElement(j.a,{className:"settingHeadR",icon:w.e})),r.a.createElement("h3",{className:"order"},"Order  -  ",F(e.validationdate)),r.a.createElement("span",{className:"orderDetails",id:"OrderInfo".concat(t)},r.a.createElement("h5",null,"Ref : ",e._id),r.a.createElement("h5",null,"Status : fulfilled"),r.a.createElement("h5",null,"Date : ",F(e.validationdate)),r.a.createElement("h5",null,"Total : ",e.totalorder,"\u20ac")),r.a.createElement("h5",{className:"hide",id:"OrderTitle".concat(t)},"Order Details"),r.a.createElement("div",{className:"hide",id:"fullOrderInfo".concat(t)},r.a.createElement("span",{className:y(e.billingaddress)?"orderDetailsExpandthreeL":"orderDetailsExpandL"},r.a.createElement("h5",{style:{fontWeight:"bold"}},"Shipping Address"),r.a.createElement("h5",{style:{marginBottom:2}},e.firstname," ",e.lastname),r.a.createElement("h5",{style:{marginBottom:2,marginTop:2}},e.optional),r.a.createElement("h5",{style:{marginBottom:2,marginTop:2}},e.address),r.a.createElement("h5",{style:{marginBottom:2,marginTop:2}},e.zipcode," ",e.city),r.a.createElement("h5",{style:{marginBottom:2,marginTop:2}},e.state)),y(e.billingaddress)?r.a.createElement("span",{className:"orderDetailsExpandM"},r.a.createElement("h5",{style:{fontWeight:"bold"}},"Billing Address"),r.a.createElement("h5",{style:{marginBottom:2}},e.compagnyname),r.a.createElement("h5",{style:{marginBottom:2,marginTop:2}},e.billingoptional),r.a.createElement("h5",{style:{marginBottom:2,marginTop:2}},e.billingaddress),r.a.createElement("h5",{style:{marginBottom:2,marginTop:2}},e.billingzipcode," ",e.billingcity),r.a.createElement("h5",{style:{marginBottom:2,marginTop:2}},e.billingstate)):null,r.a.createElement("span",{className:y(e.billingaddress)?"orderDetailsExpandthreeR":"orderDetailsExpandR"},r.a.createElement("h5",null,"Date : ",F(e.validationdate)),r.a.createElement("h5",{style:{fontWeight:"bold"}},"Total : ",e.totalorder,"\u20ac"))),r.a.createElement("div",{className:"displayOrder",onClick:function(a){return k(e._id,t)},id:"show".concat(t)},r.a.createElement("h5",{className:"showdetail"},"Show more"),r.a.createElement(j.a,{className:"settingHeadR",icon:w.f})),r.a.createElement("div",{id:t,className:"hide"},r.a.createElement("h5",{className:"orderTitles"},"Order Summary"),a,r.a.createElement("div",{className:"resumeOrder"},r.a.createElement("h5",{className:"prodListTotalQty"},N(e.productList)," items"),r.a.createElement("h5",{className:"prodListTotalPrice"},"Total : ",e.totalorder,"\u20ac")))))}));return r.a.createElement("div",{className:"accountBloc content"},r.a.createElement("div",{className:"accountsetting"},r.a.createElement("h3",null,"Hello ",C?"".concat(m.firstname," ").concat(m.lastname):m.email),r.a.createElement("div",{className:"mobil"},r.a.createElement(E.b,{to:"/myaccount",className:"linkaccount"},r.a.createElement("h5",{className:"settingHeadL"},"My Purchases"),r.a.createElement(j.a,{className:"settingHeadR",icon:w.b})),r.a.createElement(E.b,{to:"/mysettings",className:"linkaccount"},r.a.createElement("h5",{className:"settingHeadL"},"My Settings"),r.a.createElement(j.a,{className:"settingHeadR",icon:w.b})),r.a.createElement(E.b,{to:"/signout",className:"linkaccount"},r.a.createElement("h5",{className:"settingHeadL"},"Log Out"),r.a.createElement(j.a,{className:"settingHeadR",icon:w.b})),r.a.createElement("h5",null,"Need Help ?"),r.a.createElement(E.b,{to:"/contact",className:"linkaccount"},r.a.createElement("h5",{className:"settingHeadL"},"Contact Us"),r.a.createElement(j.a,{className:"settingHeadR",icon:w.b})))),r.a.createElement("div",{className:"accountOrder"},r.a.createElement("h3",null,"My Purchases"),I))})),_=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),c=a[0],l=a[1],s=f("user",[]),m=Object(u.a)(s,2),d=m[0],p=(m[1],Object(n.useState)({firstname:"",lastname:"",address:"",optional:"",zipcode:"",city:"",state:"",newsletter:!1,email:"",gender:"",phone:"",compagnyname:"",billingname:"",billingaddress:"",billingoptional:"",billingzipcode:"",billingcity:"",billingstate:"",statut:"",inscription:"",birthday:"",orders:[]})),b=Object(u.a)(p,2),N=b[0],y=b[1];Object(n.useEffect)((function(){(function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"/api/getuser",fetch("/api/getuser",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"id=".concat(d)}).then((function(e){return e.json()})).then((function(e){console.log("retour du back === ",e.user.firstname);var t=e.user.phone;void 0!=t&&(t="+33".concat(e.user.phone));var a=e.user.birthday;void 0!=a&&(a=F(e.user.birthday)),void 0!=e.user.billingaddress&&l(!0),y({firstname:e.user.firstname,lastname:e.user.lastname,address:e.user.address,optional:e.user.optional,zipcode:e.user.zipcode,city:e.user.city,state:e.user.state,newsletter:e.user.newsletter,email:e.user.email,gender:e.user.gender,phone:t,compagnyname:e.user.compagnyname,billingname:e.user.billingname,billingaddress:e.user.billingaddress,billingoptional:e.user.billingoptional,billingzipcode:e.user.billingzipcode,billingcity:e.user.billingcity,billingstate:e.user.billingstate,statut:e.user.statut,inscription:e.user.inscription,birthday:a,orders:e.user.orders})}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);return r.a.createElement("div",{className:"settingsBloc content"},r.a.createElement("a",{href:"/myaccount",className:"backToSearch"},r.a.createElement(j.a,{className:"backArrow",icon:w.a}),r.a.createElement("h5",{className:"backCollec"},"Back to my Account")),r.a.createElement("div",{className:"settingstitle"},r.a.createElement("h4",null,"My settings"),r.a.createElement("p",null,"You can manage your account and subscriptions here")),r.a.createElement("div",{className:"settingsdetails"},r.a.createElement("div",{className:"settingSubTitle"},r.a.createElement("h5",{className:"settingSubTitleDetailL"},"My Details"),r.a.createElement(E.b,{to:"/settingsform/details",className:"settingSubTitleDetailR"},"Edit")),r.a.createElement("div",{className:"settingsContent"},r.a.createElement("label",null,"First Name"),r.a.createElement("h5",null,N.firstname),r.a.createElement("label",null,"Last Name"),r.a.createElement("h5",null,N.lastname),r.a.createElement("label",null,"Email"),r.a.createElement("h5",null,N.email),r.a.createElement("label",null,"Date of birth"),r.a.createElement("h5",null,N.birthday),r.a.createElement("label",null,"Phone"),r.a.createElement("h5",null,N.phone),r.a.createElement("label",null,"Gender"),r.a.createElement("h5",null,N.gender))),r.a.createElement("div",{className:"settingsdetails"},r.a.createElement("div",{className:"settingSubTitle"},r.a.createElement("h5",{className:"settingSubTitleDetailL"},"My Addresses"),r.a.createElement(E.b,{to:"/settingsform/address",className:"settingSubTitleDetailR"},"Edit")),r.a.createElement("div",{className:"settingsContent"},r.a.createElement("label",null,"Address"),r.a.createElement("h5",null,N.address),r.a.createElement("label",{className:h(N.optional)?"hide":null},"Optional"),r.a.createElement("h5",{className:h(N.optional)?"hide":null},N.optional),r.a.createElement("label",null,"Zipcode"),r.a.createElement("h5",null,N.zipcode),r.a.createElement("label",null,"City"),r.a.createElement("h5",null,N.city),r.a.createElement("label",null,"State"),r.a.createElement("h5",null,N.state)),r.a.createElement("div",{className:c?"settingsContent":"hide"},r.a.createElement("label",{className:h(N.compagnyname)?"hide":null},"Billing Name"),r.a.createElement("h5",{className:h(N.compagnyname)?"hide":null},N.compagnyname),r.a.createElement("label",null,"Billing Address"),r.a.createElement("h5",null,N.billingaddress),r.a.createElement("label",{className:h(N.billingoptional)?"hide":null},"Optional"),r.a.createElement("h5",{className:h(N.billingoptional)?"hide":null},N.billingoptional),r.a.createElement("label",null,"Zipcode"),r.a.createElement("h5",null,N.billingzipcode),r.a.createElement("label",null,"City"),r.a.createElement("h5",null,N.billingcity),r.a.createElement("label",null,"State"),r.a.createElement("h5",null,N.billingstate))),r.a.createElement("div",{className:"settingsdetails"},r.a.createElement("div",{className:"settingSubTitle"},r.a.createElement("h5",{className:"settingSubTitleDetailL"},"Newsletter Subscription")),r.a.createElement("div",{className:"settingsContent"},r.a.createElement("div",{className:"newsletterSubTitle"},r.a.createElement("label",{className:"newsDetailL"},"Newsletter Subscription"),r.a.createElement("h5",{className:"newsDetailR",onClick:function(e){return function(e){e.preventDefault();fetch("/api/usersubcription",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"id=".concat(d,"&newsletter=").concat(!N.newsletter)}).then((function(e){return e.json()})).then((function(e){e.status&&y(Object(g.a)({},N,{newsletter:!N.newsletter}))}))}(e)}},N.newsletter?"ON":"OFF")))),r.a.createElement("div",{className:"settingsdetails"},r.a.createElement("div",{className:"settingSubTitle"},r.a.createElement("h5",{className:"settingSubTitleDetailL"},"Privacy")),r.a.createElement("div",{className:"settingsContent"},r.a.createElement("label",{className:"updatePass"},r.a.createElement(E.b,{to:"/updatepass"},"Change Password")))))},M=a(15),J={style:{base:{color:"#32325d",fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#aab7c4"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}}};function G(e,t,a,n,r,c,l,s){return V.apply(this,arguments)}function V(){return(V=Object(i.a)(o.a.mark((function e(t,a,n,r,c,l,s,i){var u,m;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u={token:t.id,userID:a,user:n,firstname:r,lastname:c,basket:l,orderID:s,totalCart:i},"/api/charge",e.next=4,fetch("/api/charge",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}).then((function(e){return e.json()})).then((function(e){return console.log("retour back",e.status),!!e.status})).catch((function(e){console.log("error == ",e)}));case 4:return m=e.sent,e.abrupt("return",m);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Y=Object(d.b)(null,(function(e){return{newCount:function(t){console.log("je suis dans le NEW COUNT REDUCER",t),e({type:"setCount",count:t})},newBasket:function(t){console.log("je suis dans le NEW BASKET REDUCERS",t),e({type:"updateBasket",basket:t})},newOrder:function(t){console.log("je suis dans le NEW ORDER REDUCER",t),e({type:"setOrder",order:t})}}}))((function(e){var t=Object(M.useStripe)(),a=Object(M.useElements)(),c=f("user",""),l=Object(u.a)(c,2),s=l[0],m=(l[1],f("guest","")),d=Object(u.a)(m,2),p=d[0],b=(d[1],Object(n.useState)({firstname:"",lastname:"",orderID:"",basket:[],totalCart:0})),E=Object(u.a)(b,2),h=E[0],N=E[1],v=Object(n.useState)(""),O=Object(u.a)(v,2);O[0],O[1];Object(n.useEffect)((function(){console.log("je recois quoi de mon element payment ? ?? ",e.user,e.basket,e.orderID,e.totalCart),N({firstname:e.user.firstname,lastname:e.user.lastname,basket:e.basket,orderID:e.orderID,totalCart:e.totalCart})}),[]);var j=function(){var n=Object(i.a)(o.a.mark((function n(r){var c,l,u;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r.preventDefault(),t&&a){n.next=3;break}return n.abrupt("return");case 3:return c=a.getElement(M.CardElement),n.next=6,t.createToken(c);case 6:if(!(l=n.sent).error){n.next=11;break}console.log("error stripe",l.error.message),n.next=16;break;case 11:return n.next=13,G(l.token,y(s)?s:p,e.user,h.firstname,h.lastname,h.basket,h.orderID,h.totalCart);case 13:u=n.sent,console.log("retour back",u),u?(console.log("merci panier valid\xe9!"),function(){var t=Object(i.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.localStorage.removeItem("order");case 2:return t.next=4,window.localStorage.removeItem("count");case 4:return t.next=6,window.localStorage.removeItem("guest");case 6:return t.next=8,e.newCount(0);case 8:return t.next=10,e.newBasket([]);case 10:return t.next=12,e.newOrder("");case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()(),e.setPaymentValid(!0)):console.log("ooops erreur!");case 16:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return r.a.createElement("form",{onSubmit:j},r.a.createElement("h4",null,"Proceed to Payment"),r.a.createElement("div",{className:"subPaymentName"},r.a.createElement("div",{className:"subPayment"},r.a.createElement("label",null,"First Name"),r.a.createElement("input",{type:"text",name:"firstname",value:h.firstname,required:!0,onChange:function(e){return N(Object(g.a)({},h,{firstname:e.target.value}))}}),r.a.createElement("h6",null,"As it appears on your card.")),r.a.createElement("div",{className:"subPayment"},r.a.createElement("label",null,"Last Name"),r.a.createElement("input",{type:"text",name:"lastname",value:h.lastname,required:!0,onChange:function(e){return N(Object(g.a)({},h,{lastname:e.target.value}))}}),r.a.createElement("h6",null,"As it appears on your card."))),r.a.createElement("label",null,"Card details"),r.a.createElement("div",{className:"subPaymentINFO"},r.a.createElement(M.CardElement,{className:"input",options:J}),r.a.createElement("div",{className:"subCardInfo"},r.a.createElement("h6",null,"Card number"),r.a.createElement("h6",null,"Enter the expiration date on your card"),r.a.createElement("h6",null,"Security Code printed on your card, 3-4 digits."))),r.a.createElement("div",null),r.a.createElement("button",{className:"button log",type:"submit",disabled:!t},"Process to Payment"))})),Z=a(35),K=function(e){Object(M.useStripe)(),Object(M.useElements)();var t=f("user",""),a=Object(u.a)(t,2),c=a[0],l=(a[1],f("guest","")),s=Object(u.a)(l,2),m=s[0],d=(s[1],Object(n.useState)(!1)),p=Object(u.a)(d,2),b=p[0],E=p[1],N=Object(n.useState)(!1),v=Object(u.a)(N,2),O=v[0],w=v[1],S=Object(n.useState)(!1),k=Object(u.a)(S,2),x=k[0],I=k[1],T=Object(n.useState)({firstname:"",lastname:"",address:"",optional:"",zipcode:"",city:"",state:"",phone:""}),D=Object(u.a)(T,2),P=D[0],A=D[1],R=Object(n.useState)({compagnyname:"",billingaddress:"",billingoptional:"",billingzipcode:"",billingcity:"",billingstate:""}),B=Object(u.a)(R,2),z=B[0],L=B[1],q=Object(n.useState)(""),U=Object(u.a)(q,2),H=U[0],F=(U[1],Object(n.useState)({firstname:"",lastname:"",address:"",optional:"",zipcode:"",state:"",city:"",newsletter:"",email:"",gender:"",phone:"",compagnyname:"",billingaddress:"",billingoptional:"",billingzipcode:"",billingcity:"",billingstate:"",statut:"",inscription:"",birthday:"",orders:[]})),W=Object(u.a)(F,2),_=W[0],J=W[1];Object(n.useEffect)((function(){(function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"/api/getuser",fetch("/api/getuser",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"id=".concat(c,"&guestID=").concat(m)}).then((function(e){return e.json()})).then((function(e){console.log("retour du back checkoutshipform === ",e,y(e.address)),y(e.user.address)?(console.log("JE SUIS PASSE LA !!"),J({firstname:e.user.firstname,lastname:e.user.lastname,address:e.user.address,optional:e.user.optional,zipcode:e.user.zipcode,city:e.user.city,state:e.user.state,newsletter:e.user.newsletter,email:e.user.email,gender:e.user.gender,phone:e.user.phone,compagnyname:e.user.compagnyname,billingname:e.user.billingname,billingaddress:e.user.billingaddress,billingoptional:e.user.billingoptional,billingzipcode:e.user.billingzipcode,billingcity:e.user.billingcity,billingstate:e.user.billingstate,statut:e.user.statut,inscription:e.user.inscription,birthday:e.user.birthday,orders:e.user.orders})):I(!0)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var G=function(t,a){t.preventDefault(),e.setnewUser(_);fetch("/api/addshippingaddress",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"id=".concat(y(c)?c:m,"&firstname=").concat(_.firstname,"&lastname=").concat(_.lastname,"&address=").concat(_.address,"&optional=").concat(_.optional,"&zipcode=").concat(_.zipcode,"&city=").concat(_.city,"&state=").concat(_.state)}).then((function(e){return e.json()})).then((function(t){t.status?(e.setValidShowPayment(!0),"Ship"===a?I(!1):E(!1)):console.log("erreur")}))};return r.a.createElement("div",null,r.a.createElement("div",{className:x?null:"hide"},r.a.createElement("form",{onSubmit:function(e){return G(e,"Ship")}},r.a.createElement("h4",null,H),r.a.createElement("div",{className:"settingsContent setForm"},r.a.createElement("h5",null,"Shipping Address"),r.a.createElement("div",{className:"popupAddressT"},r.a.createElement("div",{className:"popupAddressL"},r.a.createElement("label",null,"First Name"),r.a.createElement("input",{className:"settingInput",type:"text",name:"firstname",onChange:function(e){return J(Object(g.a)({},_,{firstname:e.target.value}))},value:_.firstname})),r.a.createElement("div",{className:"popupAddressR"},r.a.createElement("label",null,"Last Name"),r.a.createElement("input",{className:"settingInput",type:"text",name:"lastname",onChange:function(e){return J(Object(g.a)({},_,{lastname:e.target.value}))},value:_.lastname,required:!0}))),r.a.createElement("label",null,"Address"),r.a.createElement("input",{className:"settingInput",type:"text",name:"address",onChange:function(e){return J(Object(g.a)({},_,{address:e.target.value}))},value:_.address,required:!0}),r.a.createElement("label",null,"Optional"),r.a.createElement("input",{className:"settingInput",type:"text",name:"detail",onChange:function(e){return J(Object(g.a)({},_,{optional:e.target.value}))},value:_.optional}),r.a.createElement("label",null,"Zipcode"),r.a.createElement("input",{className:"settingInput",name:"zipcode",type:"text",pattern:"[0-9]*",onChange:function(e){return J(Object(g.a)({},_,{zipcode:e.target.value}))},value:_.zipcode,required:!0}),r.a.createElement("div",{className:"popupAddressT"},r.a.createElement("div",{className:"popupAddressL"},r.a.createElement("label",null,"City"),r.a.createElement("input",{className:"settingInput",type:"text",name:"city",onChange:function(e){return J(Object(g.a)({},_,{city:e.target.value}))},value:_.city})),r.a.createElement("div",{className:"popupAddressR"},r.a.createElement("label",null,"State"),r.a.createElement("input",{className:"settingInput",type:"text",name:"state",onChange:function(e){return J(Object(g.a)({},_,{state:e.target.value}))},value:_.state,required:!0}))),r.a.createElement("label",null,"Contact Phone"),r.a.createElement("input",{className:"settingInput",type:"text",name:"phone",onChange:function(e){return J(Object(g.a)({},_,{phone:e.target.value}))},value:_.phone})),r.a.createElement("div",{className:"center"},r.a.createElement("input",{type:"submit",className:"address",value:"CONTINUE"})))),r.a.createElement("div",{className:x?"hide":null},r.a.createElement("div",{className:b?"hide":"paymentSub"},r.a.createElement("div",{className:"paymentAddress"},r.a.createElement("h5",null,"Shipping Address"),r.a.createElement("h6",null,_.firstname," ",_.lastname),r.a.createElement("h6",null,_.optional),r.a.createElement("h6",null,_.address),r.a.createElement("h6",null,_.zipcode," ",_.city),r.a.createElement("h6",null,_.state),r.a.createElement("h6",{className:h(_.phone)?"hide":null},"Contact Phone: +33",_.phone)),r.a.createElement("div",{className:h(_.billingaddress)||O?"hide":"paymentAddress"},r.a.createElement("h5",null,"Billing Address"),r.a.createElement("h6",null,_.compagnyname),r.a.createElement("h6",null,_.billingoptional),r.a.createElement("h6",null,_.billingaddress),r.a.createElement("h6",null,_.billingzipcode," ",_.billingcity),r.a.createElement("h6",null,_.billingstate))),r.a.createElement("div",{className:b?"hide":"paymentSub"},r.a.createElement("input",{className:"button payChangeInfo",onClick:function(e){E(!b),A({firstname:_.firstname,lastname:_.lastname,address:_.address,optional:_.optional,zipcode:_.zipcode,city:_.city,state:_.state,phone:_.phone})},value:"Change Shipping Info"}),h(_.billingaddress)?r.a.createElement("div",{className:"payChangeInfo",onClick:function(e){w(!O)}},r.a.createElement(j.a,{className:"icon",icon:C.a})," Add Billing Address"):null,r.a.createElement("input",{className:h(_.billingstate)||O?"hide":"button payChangeInfo",onClick:function(e){w(!O),L({compagnyname:_.compagnyname,billingaddress:_.billingaddress,billingoptional:_.billingoptional,billingzipcode:_.billingzipcode,billingcity:_.billingcity,billingstate:_.billingstate})},value:"Change Billing Info"})),r.a.createElement("form",{className:b?null:"hide",onSubmit:function(e){return G(e,"correct")}},r.a.createElement(j.a,{className:"popcross",icon:C.c,onClick:function(e){E(!b),J(Object(g.a)({},_,{firstname:P.firstname,lastname:P.lastname,address:P.address,optional:P.optional,zipcode:P.zipcode,city:P.city,state:P.state,phone:P.phone}))}}),r.a.createElement("h4",null,H),r.a.createElement("div",{className:"settingsContent setForm"},r.a.createElement("h5",null,"Shipping Address"),r.a.createElement("div",{className:"popupAddressT"},r.a.createElement("div",{className:"popupAddressL"},r.a.createElement("label",null,"First Name"),r.a.createElement("input",{className:"settingInput",type:"text",name:"firstname",onChange:function(e){return J(Object(g.a)({},_,{firstname:e.target.value}))},value:_.firstname})),r.a.createElement("div",{className:"popupAddressR"},r.a.createElement("label",null,"Last Name"),r.a.createElement("input",{className:"settingInput",type:"text",name:"lastname",onChange:function(e){return J(Object(g.a)({},_,{lastname:e.target.value}))},value:_.lastname,required:!0}))),r.a.createElement("label",null,"Address"),r.a.createElement("input",{className:"settingInput",type:"text",name:"address",onChange:function(e){return J(Object(g.a)({},_,{address:e.target.value}))},value:_.address,required:!0}),r.a.createElement("label",null,"Optional"),r.a.createElement("input",{className:"settingInput",type:"text",name:"detail",onChange:function(e){return J(Object(g.a)({},_,{optional:e.target.value}))},value:_.optional}),r.a.createElement("label",null,"Zipcode"),r.a.createElement("input",{className:"settingInput",name:"zipcode",type:"text",pattern:"[0-9]*",onChange:function(e){return J(Object(g.a)({},_,{zipcode:e.target.value}))},value:_.zipcode,required:!0}),r.a.createElement("div",{className:"popupAddressT"},r.a.createElement("div",{className:"popupAddressL"},r.a.createElement("label",null,"City"),r.a.createElement("input",{className:"settingInput",type:"text",name:"city",onChange:function(e){return J(Object(g.a)({},_,{city:e.target.value}))},value:_.city})),r.a.createElement("div",{className:"popupAddressR"},r.a.createElement("label",null,"State"),r.a.createElement("input",{className:"settingInput",type:"text",name:"state",onChange:function(e){return J(Object(g.a)({},_,{state:e.target.value}))},value:_.state,required:!0}))),r.a.createElement("label",null,"Contact Phone"),r.a.createElement("input",{className:"settingInput",type:"number",name:"phone",onChange:function(e){return J(Object(g.a)({},_,{phone:e.target.value}))},value:_.phone})),r.a.createElement("div",{className:"center"},r.a.createElement("input",{type:"submit",className:"address",value:"CHANGE SHIPPING ADDRESS"}))),r.a.createElement("form",{className:O?null:"hide",onSubmit:function(t){return function(t,a){t.preventDefault(),e.setnewUser(_);fetch("/api/updateuseraddress",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"id=".concat(y(c)?c:m,"&firstname=").concat(_.firstname,"&lastname=").concat(_.lastname,"&address=").concat(_.address,"&optional=").concat(_.optional,"&zipcode=").concat(_.zipcode,"&city=").concat(_.city,"&state=").concat(_.state,"&compagnyname=").concat(_.compagnyname,"&billingaddress=").concat(_.billingaddress,"&billingoptional=").concat(_.billingoptional,"&billingzipcode=").concat(_.billingzipcode,"&billingcity=").concat(_.billingcity,"&billingstate=").concat(_.billingstate)}).then((function(e){return e.json()})).then((function(e){console.log("retour du back === ",e.status),e.status?(console.log(e),"Ship"===a?E(!1):"Bill"===a?w(!1):"NewShip"===a&&I(!1)):console.log("erreur")}))}(t,"Bill")}},r.a.createElement(j.a,{className:"popcross",icon:C.c,onClick:function(e){w(!O),J(Object(g.a)({},_,{compagnyname:z.compagnyname,billingaddress:z.billingaddress,billingoptional:z.billingoptional,billingzipcode:z.billingzipcode,billingcity:z.billingcity,billingstate:z.billingstate}))}}),r.a.createElement("h4",null,"Billing Address"),r.a.createElement("div",null,r.a.createElement("label",null,"Compagny Name (optional)"),r.a.createElement("input",{className:"settingInput",type:"text",name:"compagnyname",onChange:function(e){return J(Object(g.a)({},_,{compagnyname:e.target.value}))},value:_.compagnyname}),r.a.createElement("label",null,"Address"),r.a.createElement("input",{className:"settingInput",type:"text",name:"billingaddress",onChange:function(e){return J(Object(g.a)({},_,{billingaddress:e.target.value}))},value:_.billingaddress,required:!0}),r.a.createElement("label",null,"Optional"),r.a.createElement("input",{className:"settingInput",type:"text",name:"detail",onChange:function(e){return J(Object(g.a)({},_,{billingoptional:e.target.value}))},value:_.billingoptional}),r.a.createElement("label",null,"Zipcode"),r.a.createElement("input",{className:"settingInput",name:"zipcode",type:"text",pattern:"[0-9]*",onChange:function(e){return J(Object(g.a)({},_,{billingzipcode:e.target.value}))},value:_.billingzipcode,required:!0}),r.a.createElement("div",{className:"popupAddressT"},r.a.createElement("div",{className:"popupAddressL"},r.a.createElement("label",null,"City"),r.a.createElement("input",{className:"settingInput",type:"text",name:"city",onChange:function(e){return J(Object(g.a)({},_,{billingcity:e.target.value}))},value:_.billingcity})),r.a.createElement("div",{className:"popupAddressR"},r.a.createElement("label",null,"State"),r.a.createElement("input",{className:"settingInput",type:"text",name:"state",onChange:function(e){return J(Object(g.a)({},_,{billingstate:e.target.value}))},value:_.billingstate,required:!0})))),r.a.createElement("div",{className:"center"},r.a.createElement("input",{type:"submit",className:"address",value:"CHANGE BILLING ADDRESS"})))))};var Q=Object(Z.a)("pk_test_gVPvQdtolFZzYQmPVqUw324Z00y8aGU5CX"),$=Object(d.b)((function(e){return console.log("payment get user",e.user),{user:e.user,prodList:e.basket}}),null)((function(e){var t=Object(n.useState)([]),a=Object(u.a)(t,2),c=a[0],l=a[1],s=f("user",""),d=Object(u.a)(s,2),p=d[0],g=(d[1],f("guest","")),b=Object(u.a)(g,2),E=b[0],h=(b[1],f("order","")),v=Object(u.a)(h,2),O=v[0],j=(v[1],Object(n.useState)()),w=Object(u.a)(j,2),C=w[0],S=w[1],k=Object(n.useState)(!1),x=Object(u.a)(k,2),I=x[0],T=x[1],D=Object(n.useState)(!1),P=Object(u.a)(D,2),A=P[0],B=P[1],z=Object(n.useState)(0),L=Object(u.a)(z,2),q=L[0],U=L[1],H=Object(n.useState)(0),F=Object(u.a)(H,2),W=F[0],_=F[1];Object(n.useEffect)((function(){(function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"/api/getuserandcart",fetch("/api/getuserandcart",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"userID=".concat(y(p)?p:E,"&orderID=").concat(O)}).then((function(e){return e.json()})).then((function(e){console.log("retour du back payment page ==",e),S(e.user),l(e.basket),console.log("je verifie que je recupere le bon panier: et compte",e,y(e.user.address)),U(R(e.totalCart)),_(N(e.basket)),y(e.user.address)?T(!0):T(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var J=c.map((function(e,t){return r.a.createElement("div",{className:"productCart",key:t},r.a.createElement("div",{className:"payDetailL"},r.a.createElement("img",{className:"payPic",src:e.img}),r.a.createElement("h5",{className:"payProdName"},e.name)),r.a.createElement("h6",{className:"payDetailR"},e.price,"\u20ac"))}));return A?r.a.createElement(m.a,{to:"/success"}):r.a.createElement("div",{className:"payBloc content"},r.a.createElement(M.Elements,{stripe:Q},r.a.createElement("div",{className:"payment"},r.a.createElement(K,{setnewUser:S,setValidShowPayment:T}),I?r.a.createElement(Y,{user:C,basket:c,orderID:O,totalCart:q,setPaymentValid:B}):null)),r.a.createElement("div",{className:"paymentCart",style:{display:"flex",justifyContent:"space-around"}},J,r.a.createElement("h5",{className:"h5marg"},"Your Order (",W," items)"),r.a.createElement("div",{className:"totalCartElments"},r.a.createElement("div",{className:"totalCartElmt L"},r.a.createElement("h5",{className:"h5marg"},"Order value :"),r.a.createElement("h5",{className:"h5marg"},"Shipping :"),r.a.createElement("h5",{className:"h5marg"},"TOTAL :")),r.a.createElement("div",{className:"totalCartElmt R"},r.a.createElement("h5",{className:"h5marg"},R(q),"\u20ac"),r.a.createElement("h5",{className:"h5marg"},"FREE"),r.a.createElement("h5",{className:"h5marg"},R(q),"\u20ac")))))})),X=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),c=a[0],l=a[1],s=Object(n.useState)(!1),d=Object(u.a)(s,2),p=d[0],b=d[1],h=f("user",[]),N=Object(u.a)(h,2),y=N[0],v=(N[1],Object(n.useState)({firstname:"",lastname:"",address:"",optional:"",zipcode:"",city:"",state:"",newsletter:"",email:"",gender:"",phone:"",compagnyname:"",billingaddress:"",billingoptional:"",billingzipcode:"",billingcity:"",billingstate:"",statut:"",inscription:"",birthday:"",orders:[]})),O=Object(u.a)(v,2),C=O[0],S=O[1];Object(n.useEffect)((function(){console.log("here-------",e),function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/getuser",e.next=3,fetch("/api/getuser",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"id=".concat(y)}).then((function(e){return e.json()})).then((function(e){var t=e.user.birthday;void 0!=t&&(t=new Date(t),console.log("je passse la ==========",t)),S({firstname:e.user.firstname,lastname:e.user.lastname,address:e.user.address,optional:e.user.optional,zipcode:e.user.zipcode,city:e.user.city,state:e.user.state,newsletter:e.user.newsletter,email:e.user.email,gender:e.user.gender,phone:e.user.phone,compagnyname:e.user.compagnyname,billingname:e.user.billingname,billingaddress:e.user.billingaddress,billingoptional:e.user.billingoptional,billingzipcode:e.user.billingzipcode,billingcity:e.user.billingcity,billingstate:e.user.billingstate,statut:e.user.statut,inscription:e.user.inscription,birthday:t,orders:e.user.orders}),void 0!=e.user.billingaddress&&l(!0)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]);return p?r.a.createElement(m.a,{to:"/mysettings"}):"details"===e.match.params.form?r.a.createElement("div",{className:"settingsBloc content"},r.a.createElement("div",{className:"backToSearch set"},r.a.createElement(j.a,{className:"backArrow",icon:w.a}),r.a.createElement("h5",{className:"backSetting"},"Back to",r.a.createElement("a",{href:"/myaccount",className:""},"my Account"),"/",r.a.createElement("a",{href:"/mysettings",className:""},"my Settings "))),r.a.createElement("div",{className:"settingsdetails"},r.a.createElement("div",{className:"settingSubTitle"},r.a.createElement("h5",{className:"settingSubTitleDetailL"},"My Details")),r.a.createElement("form",{className:"settingsContent setForm",onSubmit:function(e){return function(e){e.preventDefault();fetch("/api/updateuserdetails",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"id=".concat(y,"&firstname=").concat(C.firstname,"&lastname=").concat(C.lastname,"&email=").concat(C.email,"&gender=").concat(C.gender,"&phone=").concat(C.phone,"&birthday=").concat(C.birthday)}).then((function(e){return e.json()})).then((function(e){console.log("retour du back === ",e.status),e.status?b(!0):console.log("erreur")}))}(e)}},r.a.createElement("label",null,"First Name *"),r.a.createElement("input",{className:"settingInput",type:"text",name:"firstname",onChange:function(e){return S(Object(g.a)({},C,{firstname:e.target.value}))},value:C.firstname,required:!0}),r.a.createElement("label",null,"Last Name *"),r.a.createElement("input",{className:"settingInput",type:"text",name:"lastname",onChange:function(e){return S(Object(g.a)({},C,{lastname:e.target.value}))},value:C.lastname,required:!0}),r.a.createElement("label",null,"Email *"),r.a.createElement("input",{className:"settingInput",type:"email",name:"email",onChange:function(e){return S(Object(g.a)({},C,{email:e.target.value}))},value:C.email,required:!0}),r.a.createElement("label",null,"Date of birth *"),r.a.createElement("input",{className:"settingInput",type:"date",name:"date",id:"dateDuJour",onChange:function(e){return S(Object(g.a)({},C,{birthday:e.target.value}))},valueAsDate:C.birthday,required:!0}),r.a.createElement("label",null,"Phone"),r.a.createElement("input",{className:"settingInput",type:"number",name:"phone",onChange:function(e){return S(Object(g.a)({},C,{phone:e.target.value}))},value:C.phone}),r.a.createElement("label",null,"Gender"),r.a.createElement("select",{className:"settingInput",name:"gender",onChange:function(e){return S(Object(g.a)({},C,{gender:e.target.value}))},required:!0},r.a.createElement("option",{value:C.gender},""!=C.gender?C.gender:"--"),r.a.createElement("option",{value:"Female"},"Female"),r.a.createElement("option",{value:"Male"},"Male")),r.a.createElement("div",{className:"setFormBtn"},r.a.createElement("input",{className:"button log",type:"submit",method:"post",value:"SAVE DETAILS"}),r.a.createElement(E.b,{to:"/mysettings",className:"cancel btnCancel"},"CANCEL"))))):"address"===e.match.params.form?r.a.createElement("div",{className:"settingsBloc content"},r.a.createElement("div",{className:"backToSearch set"},r.a.createElement(j.a,{className:"backArrow",icon:w.a}),r.a.createElement("h5",{className:"backSetting"},"Back to",r.a.createElement("a",{href:"/myaccount",className:""},"my Account"),"/",r.a.createElement("a",{href:"/mysettings",className:""},"my Settings "))),r.a.createElement("form",{className:"settingsdetails",onSubmit:function(e){return function(e){e.preventDefault();var t;t=c?"id=".concat(y,"&firstname=").concat(C.firstname,"&lastname=").concat(C.lastname,"&address=").concat(C.address,"&optional=").concat(C.optional,"&zipcode=").concat(C.zipcode,"&city=").concat(C.city,"&state=").concat(C.state,"&compagnyname=").concat(C.compagnyname,"&billingaddress=").concat(C.billingaddress,"&billingoptional=").concat(C.billingoptional,"&billingzipcode=").concat(C.billingzipcode,"&billingcity=").concat(C.billingcity,"&billingstate=").concat(C.billingstate):"id=".concat(y,"&firstname=").concat(C.firstname,"&lastname=").concat(C.lastname,"&address=").concat(C.address,"&optional=").concat(C.optional,"&zipcode=").concat(C.zipcode,"&city=").concat(C.city,"&state=").concat(C.state),fetch("/api/updateuseraddress",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t}).then((function(e){return e.json()})).then((function(e){console.log("retour du back === ",e.status),e.status?b(!0):console.log("erreur")}))}(e)}},r.a.createElement("div",{className:"settingSubTitle"},r.a.createElement("h5",{className:"settingSubTitleDetailL"},"My Addresses")),r.a.createElement("div",{className:"settingsContent setForm"},r.a.createElement("h5",null,"Shipping Address"),r.a.createElement("label",null,"Address"),r.a.createElement("input",{className:"settingInput",type:"text",name:"address",onChange:function(e){return S(Object(g.a)({},C,{address:e.target.value}))},value:C.address,required:!0}),r.a.createElement("label",null,"Optional"),r.a.createElement("input",{className:"settingInput",type:"text",name:"detail",onChange:function(e){return S(Object(g.a)({},C,{optional:e.target.value}))},value:C.optional}),r.a.createElement("label",null,"Zipcode"),r.a.createElement("input",{className:"settingInput",name:"zipcode",type:"text",pattern:"[0-9]*",onChange:function(e){return S(Object(g.a)({},C,{zipcode:e.target.value}))},value:C.zipcode,required:!0}),r.a.createElement("label",null,"City"),r.a.createElement("input",{className:"settingInput",type:"text",name:"city",onChange:function(e){return S(Object(g.a)({},C,{city:e.target.value}))},value:C.city}),r.a.createElement("label",null,"State"),r.a.createElement("input",{className:"settingInput",type:"text",name:"state",onChange:function(e){return S(Object(g.a)({},C,{state:e.target.value}))},value:C.state,required:!0}),r.a.createElement("h5",{className:"billingAddress",onClick:function(e){l(!c)}},c?"Billing Address (if different from Shipping)":"Add Billing Address"),r.a.createElement("div",{className:c?"display":"hide"},r.a.createElement("label",null,"Compagny Name (optional)"),r.a.createElement("input",{className:"settingInput",type:"text",name:"compagnyname",onChange:function(e){return S(Object(g.a)({},C,{compagnyname:e.target.value}))},value:C.compagnyname}),r.a.createElement("label",null,"Address"),r.a.createElement("input",{className:"settingInput",type:"text",name:"billingaddress",onChange:function(e){return S(Object(g.a)({},C,{billingaddress:e.target.value}))},value:C.billingaddress,required:!!c}),r.a.createElement("label",null,"Optional"),r.a.createElement("input",{className:"settingInput",type:"text",name:"detail",onChange:function(e){return S(Object(g.a)({},C,{billingoptional:e.target.value}))},value:C.billingoptional}),r.a.createElement("label",null,"Zipcode"),r.a.createElement("input",{className:"settingInput",name:"zipcode",type:"text",pattern:"[0-9]*",onChange:function(e){return S(Object(g.a)({},C,{billingzipcode:e.target.value}))},value:C.billingzipcode,required:!!c}),r.a.createElement("label",null,"City"),r.a.createElement("input",{className:"settingInput",type:"text",name:"city",onChange:function(e){return S(Object(g.a)({},C,{billingcity:e.target.value}))},value:C.billingcity}),r.a.createElement("label",null,"State"),r.a.createElement("input",{className:"settingInput",type:"text",name:"state",onChange:function(e){return S(Object(g.a)({},C,{billingstate:e.target.value}))},value:C.billingstate,required:!!c}))),r.a.createElement("div",{className:"setFormBtn"},r.a.createElement("input",{className:"button log",type:"submit",method:"post",value:"SAVE DETAILS"}),r.a.createElement(E.b,{to:"/mysettings",className:"cancel btnCancel"},"CANCEL")))):void 0},ee=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),c=a[0],l=a[1],s=f("user",[]),d=Object(u.a)(s,2),p=d[0],b=(d[1],Object(n.useState)({current:"",new:"",confirm:""})),h=Object(u.a)(b,2),N=h[0],y=h[1],v=Object(n.useState)(!1),O=Object(u.a)(v,2),C=O[0],S=O[1],k=Object(n.useState)(!1),x=Object(u.a)(k,2),I=x[0],T=x[1];return c?r.a.createElement(m.a,{to:"/mysettings"}):r.a.createElement("div",{className:"settingsBloc content"},r.a.createElement("div",{className:"backToSearch set"},r.a.createElement(j.a,{className:"backArrow",icon:w.a}),r.a.createElement("h5",{className:"backSetting"},"Back to",r.a.createElement("a",{href:"/myaccount",className:""},"my Account"),"/",r.a.createElement("a",{href:"/mysettings",className:""},"my Settings "))),r.a.createElement("div",{className:"settingsdetails"},r.a.createElement("div",{className:"settingSubTitle"},r.a.createElement("h5",{className:"settingSubTitleDetailL"},"Change my Password")),r.a.createElement("form",{className:"settingsContent setForm",onSubmit:function(e){return function(e){(e.preventDefault(),N.confirm===N.new)?(S(!1),function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"/api/changepassword",fetch("/api/changepassword",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"id=".concat(p,"&current=").concat(N.current,"&new=").concat(N.new,"&confirm=").concat(N.confirm)}).then((function(e){return e.json()})).then((function(e){e.status?l(!0):T(!0)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()):S(!0);console.log(N)}(e)}},r.a.createElement("label",null,"Current Password *"),r.a.createElement("input",{className:"settingInput",type:"password",name:"oldpass",onChange:function(e){return y(Object(g.a)({},N,{current:e.target.value}))},value:N.current,required:!0}),r.a.createElement("label",null,"New Password *"),r.a.createElement("input",{className:"settingInput",type:"password",name:"newpass",onChange:function(e){return y(Object(g.a)({},N,{new:e.target.value}))},value:N.new,required:!0}),r.a.createElement("label",null,"Confirm New Password *"),r.a.createElement("input",{className:"settingInput",type:"password",name:"newpassverif",onChange:function(e){return y(Object(g.a)({},N,{confirm:e.target.value}))},value:N.confirm,required:!0}),r.a.createElement("div",{className:C?null:"hide"},r.a.createElement("span",{style:{color:"red"}},"Your password and confirmation password do not match ",r.a.createElement("br",null),"This form could not be submitted. Please review your information.")),r.a.createElement("div",{className:I?null:"hide"},r.a.createElement("span",{style:{color:"red"}},"Wrong Password")),r.a.createElement("div",{className:"setFormBtn"},r.a.createElement("input",{className:"button log",type:"submit",method:"post",value:"CHANGE PASSWORD"}),r.a.createElement(E.b,{to:"/mysettings",className:"cancel btnCancel"},"CANCEL")))))},te=a(21);var ae=Object(d.b)(null,(function(e){return{newUser:function(t){console.log("je suis dans le NEW USER REDUCER",t),e({type:"setUser",user:t})}}}))((function(e){var t=f("user",""),a=Object(u.a)(t,2),n=a[0];a[1];return y(n)?r.a.createElement("div",{className:"content"},r.a.createElement("form",{className:"form logoutBloc"},r.a.createElement("h2",null,"Congrats ! You're purchase is now on the way !"),r.a.createElement(E.b,{to:"/products"},"Back to Shopping"),r.a.createElement(E.b,{to:"/myaccount"},"See my order"),r.a.createElement("img",{className:"slide logout",id:"homeSlide0",src:"homepic8.jpg"}))):r.a.createElement("div",{className:"content"},r.a.createElement("form",{className:"form logoutBloc"},r.a.createElement("h2",null,"Congrats ! You're purchase is now on the way !"),r.a.createElement(E.b,{to:"/products"},"Back to Shopping"),r.a.createElement(E.b,{to:"/signin"},"Create an account"),r.a.createElement("img",{className:"slide logout",id:"homeSlide0",src:"homepic8.jpg"})))}));te.b.add(C.d);var ne=Object(d.b)((function(e){return console.log("APP get store",e),{userName:e.user,count:e.count}}),(function(e){return{newUser:function(t){console.log("je suis dans le NEW USER REDUCER",t),e({type:"setUser",user:t})},newCount:function(t){console.log("je suis dans le NEW COUNT REDUCER",t),e({type:"setCount",count:t})},newBasket:function(t){console.log("je suis dans le NEW BASKET REDUCERS",t),e({type:"updateBasket",basket:t})},newOrder:function(t){console.log("je suis dans le NEW ORDER REDUCER",t),e({type:"setOrder",order:t})}}}))((function(e){var t=f("user",""),a=Object(u.a)(t,2),c=a[0],l=(a[1],f("order","")),s=Object(u.a)(l,2),d=s[0],g=(s[1],Object(n.useState)([])),h=Object(u.a)(g,2),j=(h[0],h[1]),w=Object(n.useState)(""),C=Object(u.a)(w,2),x=(C[0],C[1],Object(n.useState)(0)),I=Object(u.a)(x,2),T=I[0],R=I[1];return Object(n.useEffect)((function(){e.newOrder(d),e.newUser(c),function(){var t=Object(i.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"/api/get-order-and-user-from-storage",t.next=3,fetch("/api/get-order-and-user-from-storage",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"order=".concat(d,"&user=").concat(c)}).then((function(e){return e.json()})).then(function(){var t=Object(i.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j(a.basket);case 2:return t.next=4,e.newBasket(a.basket);case 4:return t.next=6,e.newCount(N(a.basket));case 6:return t.next=8,R(N(a.basket));case 8:return t.next=10,localStorage.setItem("count",JSON.stringify(N(a.basket)));case 10:if(!y(a.orderID)){t.next=13;break}return t.next=13,localStorage.setItem("order",JSON.stringify(a.orderID));case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()(),e.newCount(T)}),[]),y(e.userName)?(console.log("je passe dans le if APP",e.userName),r.a.createElement("div",{className:"App"},r.a.createElement(E.a,null,r.a.createElement(m.d,null,r.a.createElement("div",null,r.a.createElement(S,{count:e.count,user:y(e.userName)}),r.a.createElement(m.b,{path:"/",exact:!0,component:D}),r.a.createElement(m.b,{path:"/products",component:p}),r.a.createElement(m.b,{path:"/form",component:b}),r.a.createElement(m.b,{path:"/signout",component:O}),r.a.createElement(m.b,{path:"/signin",component:v}),r.a.createElement(m.b,{path:"/change",component:k}),r.a.createElement(m.b,{path:"/about",component:P}),r.a.createElement(m.b,{path:"/collection",component:A}),r.a.createElement(m.b,{path:"/cart",component:B}),r.a.createElement(m.b,{path:"/prodcard/:id",component:L}),r.a.createElement(m.b,{path:"/contact",component:q}),r.a.createElement(m.b,{path:"/checkout",component:U}),r.a.createElement(m.b,{path:"/shippinginfo",component:H}),r.a.createElement(m.b,{path:"/signout",component:O}),r.a.createElement(m.b,{path:"/myaccount",component:W}),r.a.createElement(m.b,{path:"/payment",component:$}),r.a.createElement(m.b,{path:"/mysettings",component:_}),r.a.createElement(m.b,{path:"/settingsform/:form",component:X}),r.a.createElement(m.b,{path:"/updatepass",component:ee}),r.a.createElement(m.b,{path:"/success",component:ae})))))):(console.log("je passe dans le else APP",e.userName),r.a.createElement("div",{className:"App"},r.a.createElement(E.a,null,r.a.createElement(m.d,null,r.a.createElement("div",null,r.a.createElement(S,{count:e.count,user:y(e.userName)}),r.a.createElement(m.b,{path:"/",exact:!0,component:D}),r.a.createElement(m.b,{path:"/products",component:p}),r.a.createElement(m.b,{path:"/form",component:b}),r.a.createElement(m.b,{path:"/signout",component:O}),r.a.createElement(m.b,{path:"/signin",component:v}),r.a.createElement(m.b,{path:"/change",component:k}),r.a.createElement(m.b,{path:"/about",component:P}),r.a.createElement(m.b,{path:"/collection",component:A}),r.a.createElement(m.b,{path:"/cart",component:B}),r.a.createElement(m.b,{path:"/prodcard/:id",component:L}),r.a.createElement(m.b,{path:"/contact",component:q}),r.a.createElement(m.b,{path:"/checkout",component:U}),r.a.createElement(m.b,{path:"/shippinginfo",component:H}),r.a.createElement(m.b,{path:"/payment",component:$}),r.a.createElement(m.b,{path:"/success",component:ae}))))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var re=a(20),ce=Object(re.c)(Object(re.b)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return"setUser"===t.type?(console.log(t.user),t.user):e},basket:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return"setBasket"===t.type?(e.push(t.basket),e):"updateBasket"===t.type?(console.log("updateBasket =========",t.basket),t.basket):"deleteBasket"===t.type?t.basket:e},count:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return"setCount"===t.type?t.count:e},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return"setOrder"===t.type&&y(t.order)?t.order:e}}));l.a.render(r.a.createElement(d.a,{store:ce},r.a.createElement(ne,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[36,1,2]]]);
//# sourceMappingURL=main.1429e6b0.chunk.js.map