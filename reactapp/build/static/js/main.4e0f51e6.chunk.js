(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{32:function(e,t,a){e.exports=a(49)},37:function(e,t,a){},39:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},40:function(e,t,a){},49:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(22),l=a.n(r),s=(a(37),a(3)),o=a.n(s),i=a(5),u=a(1),m=(a(39),a(40),a(17)),d=a(7),p=function(e){var t=Object(n.useState)([]),a=Object(u.a)(t,2),r=a[0],l=a[1],s=Object(n.useState)(""),d=Object(u.a)(s,2),p=d[0],g=d[1];Object(n.useEffect)((function(){(function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/product").then((function(e){return e.json()})).then((function(e){return l(e.products)})).catch((function(e){return console.log("erreur fetch",e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var b=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=r.map((function(e,t){return c.a.createElement("span",{style:{float:"left"},className:"products",key:t},c.a.createElement("img",{onClick:function(e){console.log(e.target.id),b(e.target.id)},id:e._id,className:"productPic",src:e.img}),c.a.createElement("h4",null,e.name),c.a.createElement("span",null,c.a.createElement("h5",null,"Prix : ",e.price,"\u20ac"),c.a.createElement("h5",null,"Type de produit : ",e.type)))}));return""===p?c.a.createElement("div",{className:"blocProduct content"},E):c.a.createElement(m.a,{to:"/prodcard/".concat(p)})},g=a(2),b=function(e){var t=Object(n.useState)({name:"",price:0,type:"",enabled:!0}),a=Object(u.a)(t,2),r=a[0],l=a[1],s=Object(n.useState)(!0),d=Object(u.a)(s,2),p=d[0],b=d[1],E=function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),"/api/addproduct",e.next=4,fetch("/api/addproduct",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"name=".concat(r.name,"&price=").concat(r.price,"&type=").concat(r.type,"&enabled=").concat(r.enabled)}).then((function(e){return e.json()})).then((function(e){return c.a.createElement(m.a,{to:"/"})}));case 4:b(!1),console.log("j'ajoute ce produit : ",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return p?c.a.createElement("div",{id:"form"},c.a.createElement("form",{className:"new-product"},c.a.createElement("h2",{style:{margin:30}},"Ajouter un produit"),c.a.createElement("div",{className:"form"},c.a.createElement("h5",{className:"inputname"},"Nom :"),c.a.createElement("input",{className:"Product-input",name:"name",placeholder:"Nom du produit",onChange:function(e){return l(Object(g.a)({},r,{name:e.target.value}))},value:r.name,required:!0}),c.a.createElement("h5",{className:"inputname"},"Prix :"),c.a.createElement("input",{type:"number",className:"Product-input",name:"price",placeholder:"Prix du produit",onChange:function(e){return l(Object(g.a)({},r,{price:e.target.value}))},value:r.price,required:!0}),c.a.createElement("h5",{className:"inputname"},"Type :"),c.a.createElement("input",{className:"Product-input",name:"type",placeholder:"Type de produit",onChange:function(e){return l(Object(g.a)({},r,{type:e.target.value}))},value:r.type,required:!0}),c.a.createElement("input",{className:"button",type:"submit",method:"post",value:"Ajouter Produit",onClick:function(e){return E(e)}})))):c.a.createElement(m.a,{to:"/"})},E=a(4);function h(e){return"undefined"===e||null===e||void 0===e||""===e}var f=function(e,t){var a=Object(n.useState)((function(){try{var a=window.localStorage.getItem(e);return a?JSON.parse(a):t}catch(n){return console.log(n),t}})),c=Object(u.a)(a,2),r=c[0],l=c[1];return[r,function(t){try{var a=t instanceof Function?t(r):t;l(a),window.localStorage.setItem(e,JSON.stringify(a))}catch(n){console.log(n)}}]};function N(e){if(null!=e&&e!=[]){for(var t=0,a=0;a<e.length;a++)t+=e[a].quantity;return t}return 0}function y(e){return"undefined"!==e&&null!==e&&void 0!==e&&""!==e&&!1!==e&&e!==[]}var v=Object(d.b)(null,(function(e){return{newUser:function(t){console.log("je suis dans le NEW USER REDUCER",t),e({type:"setUser",user:t})},newCount:function(t){console.log("je suis dans le NEW COUNT REDUCER",t),e({type:"setCount",count:t})},newBasket:function(t){console.log("je suis dans le NEW BASKET REDUCERS",t),e({type:"updateBasket",basket:t})},newOrder:function(t){console.log("je suis dans le NEW ORDER REDUCER",t),e({type:"setOrder",order:t})}}}))((function(e){var t=Object(n.useState)({firstname:"",lastname:"",email:"",password:""}),a=Object(u.a)(t,2),r=a[0],l=a[1],s=f("order",""),d=Object(u.a)(s,2),p=d[0],b=(d[1],f("guest","")),h=Object(u.a)(b,2),v=h[0],O=(h[1],Object(n.useState)({email:"",password:""})),j=Object(u.a)(O,2),w=j[0],C=j[1],S=Object(n.useState)(!1),k=Object(u.a)(S,2),x=k[0],I=k[1],T=Object(n.useState)(""),P=Object(u.a)(T,2),D=P[0],A=P[1];return x?c.a.createElement(m.a,{to:{pathname:"/",user:D}}):c.a.createElement("div",{className:"blocSignIn content"},c.a.createElement("form",{className:"form",onSubmit:function(t){return function(t){t.preventDefault();fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"email=".concat(w.email,"&password=").concat(w.password,"&orderID=").concat(p)}).then((function(e){return e.json()})).then((function(t){if(console.log("hello ======",t),t.status){(function(){var a=Object(i.a)(o.a.mark((function a(){return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,A(t.id);case 2:return a.next=4,localStorage.setItem("user",JSON.stringify(t.id));case 4:return a.next=6,localStorage.setItem("order",JSON.stringify(t.order));case 6:return a.next=8,localStorage.setItem("count",JSON.stringify(N(t.basket)));case 8:if(e.newUser(t.id),e.newOrder(t.order),e.newBasket(t.basket),e.newCount(N(t.basket)),!y(v)){a.next=15;break}return a.next=15,window.localStorage.removeItem("guest");case 15:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}})()(),I(!0)}else{alert("le mot de passe et l'email ne correspondent pas")}}))}(t)}},c.a.createElement("h2",null,"LOG IN"),c.a.createElement("span",{className:"logContent"},c.a.createElement("label",null,"Email"),c.a.createElement("input",{type:"email",className:"Login-input",name:"login_email",placeholder:"Votre email",onChange:function(e){return C(Object(g.a)({},w,{email:e.target.value}))},value:w.email,required:!0}),c.a.createElement("label",null,"Password"),c.a.createElement("input",{type:"password",className:"Login-input",name:"login_password",placeholder:"Votre mot de passe",onChange:function(e){return C(Object(g.a)({},w,{password:e.target.value}))},value:w.password,required:!0}),c.a.createElement(E.b,{className:"resetPass"},"Forgot your password ?")),c.a.createElement("input",{className:"button log",type:"submit",method:"post",value:"LOG IN"})),c.a.createElement("form",{className:"form",onSubmit:function(t){return function(t){t.preventDefault();fetch("/api/newuser",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"email=".concat(r.email,"&password=").concat(r.password,"&statut=user&orderID=").concat(p)}).then((function(e){return e.json()})).then((function(t){if(console.log("hello ============",t.status),t.status){(function(){var a=Object(i.a)(o.a.mark((function a(){return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,A(t.id);case 2:return a.next=4,localStorage.setItem("user",JSON.stringify(t.id));case 4:return a.next=6,e.newUser(t.id);case 6:if(!y(v)){a.next=9;break}return a.next=9,window.localStorage.removeItem("guest");case 9:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}})()(),I(!0)}else{alert("Un compte est d\xe9j\xe0 associ\xe9 \xe0 cet email")}}))}(t)}},c.a.createElement("h2",null,"REGISTER"),c.a.createElement("span",{className:"logContent"},c.a.createElement("h5",null,"If you still don't have a Squillace account, ",c.a.createElement("br",null),"use this registration form to join in."),c.a.createElement("label",null,"Email"),c.a.createElement("input",{type:"email",className:"Login-input",name:"login_email",placeholder:"Votre email",onChange:function(e){return l(Object(g.a)({},r,{email:e.target.value}))},value:r.email,required:!0}),c.a.createElement("label",null,"Password"),c.a.createElement("input",{type:"password",className:"Login-input",name:"login_password",placeholder:"Votre mot de passe",onChange:function(e){return l(Object(g.a)({},r,{password:e.target.value}))},value:r.password,required:!0})),c.a.createElement("input",{className:"button log",type:"submit",method:"post",value:"CREATE ACCOUNT"})))}));var O=Object(d.b)(null,(function(e){return{newUser:function(t){console.log("je suis dans le NEW USER REDUCER",t),e({type:"setUser",user:t})}}}))((function(e){return Object(n.useEffect)((function(){e.newUser(""),window.localStorage.removeItem("user")})),c.a.createElement("div",{className:"content"},c.a.createElement("form",{className:"form logoutBloc"},c.a.createElement("h2",null,"You're logged Out !"),c.a.createElement(E.b,{to:"/products"},"Back to Shopping"),c.a.createElement("img",{className:"slide logout",id:"homeSlide0",src:"homepic8.jpg"})))})),j=a(8),w=a(10),C=a(13);var S=Object(d.b)((function(e){return{userName:e.user}}),null)((function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),r=a[0],l=a[1],s=Object(n.useState)(!1),o=Object(u.a)(s,2),i=(o[0],o[1],Object(n.useState)(0)),m=Object(u.a)(i,2),d=(m[0],m[1],Object(n.useState)("")),p=Object(u.a)(d,2),g=(p[0],p[1]);Object(n.useEffect)((function(){var e=JSON.parse(window.localStorage.getItem("user"));console.log("user ==========",JSON.parse(window.localStorage.getItem("user"))),null!=e&&g(e)}),[]);var b=function(e){e.preventDefault(),l(!r)};return e.user?c.a.createElement("header",{className:"header"},c.a.createElement("div",{className:"title"},c.a.createElement(E.b,{to:"/",exact:!0},c.a.createElement("img",{className:"logo",src:"/logo.png"}))),c.a.createElement("div",{className:"linksWeb"},c.a.createElement("ul",{className:"lienweb"},c.a.createElement("li",{className:"linkHeader"},c.a.createElement(E.b,{to:"/about"},"About ")),c.a.createElement("li",{className:"linkHeader"},c.a.createElement(E.b,{to:"/collection"},"Collection")),c.a.createElement("li",{className:"linkHeader"},c.a.createElement(E.b,{to:"/products"},"Shop")),c.a.createElement("li",{className:"linkHeader"},c.a.createElement(E.b,{to:"/contact"},"Contact")),c.a.createElement("span",{className:"linkHeader"},c.a.createElement("li",{className:"linkHeader"},c.a.createElement(E.b,{to:"/myaccount"},"My Account"))),c.a.createElement("li",{className:"linkHeader",onClick:function(e){return b(e)}},c.a.createElement(E.b,{to:"/cart"},c.a.createElement(j.a,{icon:C.b})," (",e.count,")")))),c.a.createElement("nav",{className:"linksMobil"},r?null:c.a.createElement(j.a,{icon:w.c,className:"fa-2x menuToogle",onClick:function(e){return b(e)}}),r?c.a.createElement(j.a,{icon:C.c,className:"fa-2x menuToogle",onClick:function(e){return b(e)}}):null,r?c.a.createElement("ul",{className:"is-expanded"},c.a.createElement("li",{className:"linkHeader",onClick:function(e){return b(e)}},c.a.createElement(E.b,{to:"/about"},"About ")),c.a.createElement("li",{className:"linkHeader",onClick:function(e){return b(e)}},c.a.createElement(E.b,{to:"/collection"},"Collection")),c.a.createElement("li",{className:"linkHeader",onClick:function(e){return b(e)}},c.a.createElement(E.b,{to:"/products"},"Shop")),c.a.createElement("li",{className:"linkHeader",onClick:function(e){return b(e)}},c.a.createElement(E.b,{to:"/contact"},"Contact")),c.a.createElement("li",{className:"linkHeader",onClick:function(e){return b(e)}},c.a.createElement(E.b,{to:"/myaccount"},"My Account")),c.a.createElement("li",{className:"linkHeader",onClick:function(e){return b(e)}},c.a.createElement(E.b,{to:"/cart"},c.a.createElement(j.a,{icon:C.b})," (",e.count,")"))):null)):c.a.createElement("header",{className:"header"},c.a.createElement("div",{className:"title"},c.a.createElement(E.b,{to:"/",exact:!0},c.a.createElement("img",{className:"logo",src:"/logo.png"}))),c.a.createElement("div",{className:"linksWeb"},c.a.createElement("ul",{className:"lienweb"},c.a.createElement("li",{className:"linkHeader"},c.a.createElement(E.b,{to:"/about"},"About ")),c.a.createElement("li",{className:"linkHeader"},c.a.createElement(E.b,{to:"/collection"},"Collection")),c.a.createElement("li",{className:"linkHeader"},c.a.createElement(E.b,{to:"/products"},"Shop")),c.a.createElement("li",{className:"linkHeader"},c.a.createElement(E.b,{to:"/contact"},"Contact")),c.a.createElement("li",{className:"linkHeader"},c.a.createElement(E.b,{to:"/signin"},"Sign In")),c.a.createElement("li",{className:"linkHeader",onClick:function(e){return b(e)}},c.a.createElement(E.b,{to:"/cart"},c.a.createElement(j.a,{icon:C.b})," (",e.count,")")))),c.a.createElement("nav",{className:"linksMobil"},r?null:c.a.createElement(j.a,{icon:w.c,className:"fa-2x menuToogle",onClick:function(e){return b(e)}}),r?c.a.createElement(j.a,{icon:C.c,className:"fa-2x menuToogle",onClick:function(e){return b(e)}}):null,r?c.a.createElement("ul",{className:"is-expanded"},c.a.createElement("li",{className:"linkHeader",onClick:function(e){return b(e)}},c.a.createElement(E.b,{to:"/about"},"About ")),c.a.createElement("li",{className:"linkHeader",onClick:function(e){return b(e)}},c.a.createElement(E.b,{to:"/collection"},"Collection")),c.a.createElement("li",{className:"linkHeader",onClick:function(e){return b(e)}},c.a.createElement(E.b,{to:"/products"},"Shop")),c.a.createElement("li",{className:"linkHeader",onClick:function(e){return b(e)}},c.a.createElement(E.b,{to:"/contact"},"Contact")),c.a.createElement("li",{className:"linkHeader",onClick:function(e){return b(e)}},c.a.createElement(E.b,{to:"/signin"},"Sign In")),c.a.createElement("li",{className:"linkHeader",onClick:function(e){return b(e)}},c.a.createElement(E.b,{to:"/cart"},c.a.createElement(j.a,{icon:C.b})," (",e.count,")"))):null))})),k=function(e){var t=Object(n.useState)({id:"",name:"",price:0,type:""}),a=Object(u.a)(t,2),r=a[0],l=a[1],s=Object(n.useState)([]),d=Object(u.a)(s,2),p=d[0],b=d[1],E=Object(n.useState)(!0),h=Object(u.a)(E,2),f=h[0],N=h[1];Object(n.useEffect)((function(){(function(){var t=Object(i.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/get-one-product?id=".concat(e.location.idProduct)).then((function(e){return e.json()})).then((function(e){l({id:e.products._id,name:e.products.name,price:e.products.price,type:e.products.type}),b(Object(g.a)({},p,{id:e.products._id}))})).catch((function(e){return console.log("erreur fetch",e)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]);return f?c.a.createElement("div",{id:"blocHome content"},c.a.createElement("div",null,c.a.createElement("div",{className:"products"},c.a.createElement("div",null,c.a.createElement("h3",null,r.name),c.a.createElement("h5",null,"Prix : ",r.price,"\u20ac"),c.a.createElement("h5",null,"Type de produit : ",r.type)),c.a.createElement("div",null,c.a.createElement("h5",null,"Remplacer le nom du produit par :"),c.a.createElement("input",{type:"text",className:"Product-input",name:"name",placeholder:r.name,onChange:function(e){return b(Object(g.a)({},p,{name:e.target.value}))},value:p.name}),c.a.createElement("h5",null,"Remplacer le prix du produit par :"),c.a.createElement("input",{type:"number",className:"Product-input",name:"price",placeholder:r.price,onChange:function(e){return b(Object(g.a)({},p,{price:e.target.value}))},value:p.price}),c.a.createElement("h5",null,"Remplacer le type du produit par :"),c.a.createElement("input",{type:"text",className:"Product-input",name:"type",placeholder:r.type,onChange:function(e){return b(Object(g.a)({},p,{type:e.target.value}))},value:p.type}),c.a.createElement("div",null,c.a.createElement("button",{className:"change-btn",onClick:function(e){e.target.value,fetch("/api/changeproduct",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"id=".concat(p.id,"&name=").concat(p.name,"&price=").concat(p.price,"&type=").concat(p.type)}).then((function(e){N(!1)})).catch((function(e){return console.log("erreur fetch",e)}))},value:r.id},"Modifier Produit")))))):c.a.createElement(m.a,{to:"/"})};var x=Object(d.b)((function(e){return console.log("home page get user HOME",e),{userName:e.user}}),null)((function(e){var t=Object(n.useState)(["homepic.png","homepic1.png","homepic2.png","homepic3.png","homepic4.png","homepic5.png","homepic6.png","homepic7.png","homepic8.jpg","homepic9.jpg","homepic10.jpg"]),a=Object(u.a)(t,2),r=a[0],l=(a[1],Object(n.useState)(0)),s=Object(u.a)(l,2),o=s[0],i=s[1];return c.a.createElement("div",{style:{paddingTop:90}},c.a.createElement("div",{className:"slideshow"},c.a.createElement("div",{className:"testSlideLeft",onClick:function(e){e.target.value,i(o>1?o-1:r.length-1)}}," "),c.a.createElement("div",{className:"testSlideRight",onClick:function(e){e.target.value,o<=r.length-2?i(o+1):i(0)}}," "),c.a.createElement("img",{className:"slide",id:"homeSlide0",src:r[o]})),c.a.createElement("div",{className:"footer"},c.a.createElement("a",{href:"https://www.facebook.com/martina.squillacedesigner",target:"_blanck",alt:""},c.a.createElement("img",{src:"logofbk.png",className:"socMedia",alt:""})),c.a.createElement("a",{href:"https://www.pinterest.it/martinasquillac/",target:"_blanck",alt:""},c.a.createElement("img",{src:"logopinterest.png",className:"socMedia",alt:""})),c.a.createElement("a",{href:"https://www.instagram.com/martinasquillace/?hl=fr",target:"_blanck",alt:""},c.a.createElement("img",{src:"logoinsta.png",className:"socMedia",alt:""})),c.a.createElement("a",{href:"/contact",target:"_blanck",alt:""},c.a.createElement("img",{src:"logomail.png",className:"socMedia",alt:""}))))})),I=function(e){return c.a.createElement("div",{className:"about content"},c.a.createElement("div",{className:"aboutSub"},c.a.createElement("img",{className:"aboutPic",src:"martina.jpg",alt:""})),c.a.createElement("div",{className:"aboutSub"},c.a.createElement("h5",{className:"aboutText"},"Martina Squillace is an Italian Art Director and Stylist based in Paris.",c.a.createElement("br",null),c.a.createElement("br",null),"After her fashion design studies she has worked with numerous brands troughtout design and commercial departements, where she learned the importance of visual communication, which has become her passion and her work through styling and art direction.",c.a.createElement("br",null),c.a.createElement("br",null),"Her style, which is characterized by a savage instinct and also an elegant attitude, is the result of continuous cultural and spiritual research.")))},T=function(e){return c.a.createElement("div",{className:"collection content"},c.a.createElement("div",null,c.a.createElement("img",{className:"collecPic",src:"marti1.jpg",alt:""}),c.a.createElement("img",{className:"collecPic",src:"marti2.jpg",alt:""}),c.a.createElement("img",{className:"collecPic",src:"marti3.jpg",alt:""}),c.a.createElement("img",{className:"collecPic",src:"marti4.jpg",alt:""}),c.a.createElement("img",{className:"collecPic",src:"marti5.jpg",alt:""}),c.a.createElement("img",{className:"collecPic",src:"marti6.jpg",alt:""}),c.a.createElement("img",{className:"collecPic",src:"marti7.jpg",alt:""}),c.a.createElement("img",{className:"collecPic",src:"marti8.jpg",alt:""}),c.a.createElement("img",{className:"collecPic",src:"marti9.jpg",alt:""}),c.a.createElement("img",{className:"collecPic",src:"marti10.jpg",alt:""}),c.a.createElement("img",{className:"collecPic",src:"marti11.jpg",alt:""}),c.a.createElement("img",{className:"collecPic",src:"marti12.jpg",alt:""})))};var P=function(e){return Math.round(1e3*e)/1e3};var D=Object(d.b)((function(e){return{basket:e.basket}}),(function(e){return{newCount:function(t){console.log("je suis dans le NEW COUNT REDUCER",t),e({type:"setCount",count:t})},newBasket:function(t){console.log("je suis dans le NEW BASKET REDUCERS",t),e({type:"updateBasket",basket:t})}}}))((function(e){var t=Object(n.useState)([]),a=Object(u.a)(t,2),r=a[0],l=a[1],s=f("guest",""),m=Object(u.a)(s,2),d=m[0],p=(m[1],f("order","")),g=Object(u.a)(p,2),b=g[0],h=(g[1],f("user","")),v=Object(u.a)(h,2),O=v[0],C=(v[1],Object(n.useState)(0)),S=Object(u.a)(C,2),k=S[0],x=S[1],I=Object(n.useState)(0),T=Object(u.a)(I,2),D=T[0],A=T[1],R=Object(n.useState)(""),B=Object(u.a)(R,2);B[0],B[1];Object(n.useEffect)((function(){(function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/cart",e.next=3,fetch("/api/cart",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"orderID=".concat(b)}).then((function(e){return e.json()})).then((function(e){e.status?(l(e.basket),console.log("je verifie que je recupere le bon panier: ",e.basket),x(e.totalCart),A(N(e.basket))):console.log("erreur")})).catch((function(e){return console.log("erreur fetch",e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var L=function(){var t=Object(i.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"/api/delete-product-from-order",t.next=3,fetch("/api/delete-product-from-order",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"orderID=".concat(b,"&_id=").concat(a)}).then((function(e){return e.json()})).then((function(t){!0===t.status?(console.log("je verifie le retour du back : ",t),l(t.basket),x(t.totalCart),A(N(t.basket)),e.newBasket(t.basket),e.newCount(N(t.basket)),localStorage.setItem("count",JSON.stringify(N(t.basket)))):console.log("error")}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),z=function(){var t=Object(i.a)(o.a.mark((function t(a,n,c){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(a,n,c),"/api/update-qty-to-order",t.next=4,fetch("/api/update-qty-to-order",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"orderID=".concat(b,"&_id=").concat(n,"&qty=").concat(a,"&size=").concat(c)}).then((function(e){return e.json()})).then((function(t){t.status?(console.log("je verifie que mes prix concordent ici le retour du back : ",t),l(t.basket),x(t.totalCart),A(N(t.basket)),e.newBasket(t.basket),e.newCount(N(t.basket)),localStorage.setItem("count",JSON.stringify(N(t.basket)))):(l([]),console.log("error"))}));case 4:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),q=r.map((function(e,t){return c.a.createElement("div",{className:"productsCart",key:t},c.a.createElement("div",{className:"productsCartPicTitle"},c.a.createElement("img",{className:"collecPic cartPic",src:e.img}),c.a.createElement("h5",{className:"productsNameCart"},e.name)),c.a.createElement("div",{className:"productsCartSub"},c.a.createElement("div",null,c.a.createElement("h5",{className:"productsDetailL"},"Price :"),c.a.createElement("h5",{className:"productsDetailR"},e.price/e.quantity,"\u20ac")),c.a.createElement("div",null,c.a.createElement("h5",{className:"productsDetailL"},"Size :"),c.a.createElement("h5",{className:"productsDetailR"},e.size)),c.a.createElement("div",{className:"productsQty"},c.a.createElement("h5",{className:"productsDetailL"},"Quantity :"),c.a.createElement("div",{className:"productsDetailRQty"},c.a.createElement(j.a,{icon:w.d,className:"qty-btn less",onClick:function(t){return z("less",e._id,e.size)}}),c.a.createElement("h5",{className:"productsDetailQty"},e.quantity," "),c.a.createElement(j.a,{icon:w.e,className:"qty-btn add",onClick:function(t){return z("add",e._id,e.size)}})))),c.a.createElement("h5",{className:"productsTotalPrice"},"Total : ",e.price,"\u20ac"),c.a.createElement("i",{class:"far fa-trash-alt"}),c.a.createElement(j.a,{className:"delete-btn",icon:w.f,onClick:function(t){return L(e._id)},value:e._id}))}));return r.length>0?c.a.createElement("div",{className:"Cart content"},c.a.createElement("div",{className:"blocCart"},q),c.a.createElement("div",{className:"totalCart",style:{display:"flex",justifyContent:"space-around"}},c.a.createElement("h5",{className:"marg"},"SHOPPING BAG TOTAL (",D," items)"),y(O)?null:c.a.createElement("div",null,c.a.createElement("h5",{className:"marg"},"Log in to order with your account"),c.a.createElement(E.b,{to:"/login",className:"cartLink"},c.a.createElement("button",{className:"btnCart"},"SIGN IN"))),c.a.createElement("div",{className:"totalCartElments"},c.a.createElement("div",{className:"totalCartElmt L"},c.a.createElement("h5",{className:"marg"},"Order value :"),c.a.createElement("h5",{className:"marg"},"Shipping :"),c.a.createElement("h5",{className:"marg"},"TOTAL :")),c.a.createElement("div",{className:"totalCartElmt R"},c.a.createElement("h5",{className:"marg"},P(k),"\u20ac"),c.a.createElement("h5",{className:"marg"},"FREE"),c.a.createElement("h5",{className:"marg"},P(k),"\u20ac"))),c.a.createElement(E.b,{to:y(O)||y(d)?"/payment":"/checkout",className:"cartLink"},c.a.createElement("button",{className:"btnCart checkBtn"},"CONTINUE TO CHECKOUT")))):c.a.createElement("div",{className:"content",style:{flexDirection:"column",margin:20}},c.a.createElement("h3",{className:"emptyCart"},"YOUR SHOPPING BAG IS EMPTY!",c.a.createElement("br",null),c.a.createElement("br",null),"Sign in to save or access saved items in your shopping bag."),c.a.createElement(E.b,{to:"/signin"},c.a.createElement("h3",{style:{margin:20}},"Sign In")),c.a.createElement("img",{className:"emptyCartPic",src:"homepic.png"}))})),A=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),r=a[0],l=a[1],s=Object(n.useState)(!1),o=Object(u.a)(s,2),i=o[0],d=o[1];return r?c.a.createElement(m.a,{to:"/products"}):i?c.a.createElement(m.a,{to:"/cart"}):c.a.createElement("div",{className:"popup"},c.a.createElement("div",{className:"popupinner"},c.a.createElement("h4",null,e.text),c.a.createElement("p",null,"was successfully added to your shopping cart"),c.a.createElement("div",null,c.a.createElement("button",{className:"checkInOut",onClick:function(){l(!0)}},"CONTINUE SHOPPING"),c.a.createElement("button",{className:"checkInOut",onClick:function(){d(!0)}},"CHECKOUT"))))};var R=Object(d.b)(null,(function(e){return{newCount:function(t){console.log("je suis dans le NEW COUNT REDUCER",t),e({type:"setCount",count:t})},newBasket:function(t){console.log("je suis dans le NEW BASKET REDUCERS",t),e({type:"updateBasket",basket:t})},newOrder:function(t){console.log("je suis dans le NEW ORDER REDUCER",t),e({type:"setOrder",order:t})}}}))((function(e){var t=f("user",[]),a=Object(u.a)(t,2),r=a[0],l=(a[1],f("order","")),s=Object(u.a)(l,2),m=s[0],d=(s[1],Object(n.useState)({id:"",name:"",price:0,type:"",img:""})),p=Object(u.a)(d,2),b=p[0],E=p[1],h=Object(n.useState)([]),v=Object(u.a)(h,2),O=v[0],C=v[1],S=Object(n.useState)({productID:"",name:"",price:0,type:"",img:"",quantity:1,size:""}),k=Object(u.a)(S,2),x=k[0],I=k[1],T=Object(n.useState)(!1),P=Object(u.a)(T,2),D=P[0],R=P[1];Object(n.useEffect)((function(){(function(){var t=Object(i.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"/api/get-one-product",t.next=3,fetch("/api/get-one-product",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"id=".concat(e.match.params.id,"&orderID=").concat(m)}).then((function(e){return e.json()})).then((function(e){console.log("retour de get one",e),E({productID:e.products._id,name:e.products.name,price:e.products.price,type:e.products.type,img:e.products.img}),I(Object(g.a)({},x,{productID:e.products._id,name:e.products.name,type:e.products.type,img:e.products.img,price:e.products.price})),null===e.orderID?C(null):(console.log("ce que jenregistre comme panier en cours",e.basket),C(e.basket))})).catch((function(e){return console.log("erreur fetch",e)}));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]);var B=function(){var t=Object(i.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),!y(O)){t.next=7;break}return"/api/add-product-to-order",t.next=5,fetch("/api/add-product-to-order",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"id=".concat(r,"&orderID=").concat(m,"&tempStore=").concat(JSON.stringify(x))}).then((function(e){return e.json()})).then((function(t){console.log("retour du back === ",t),t.status?(localStorage.setItem("order",JSON.stringify(t.orderID)),localStorage.setItem("count",JSON.stringify(N(t.basket))),e.newOrder(t.orderID),e.newBasket(t.basket),e.newCount(N(t.basket)),R(!D)):console.log("erreur")}));case 5:t.next=10;break;case 7:return"/api/createorder",t.next=10,fetch("/api/createorder",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"id=".concat(r,"&productID=").concat(x.productID,"&name=").concat(x.name,"&price=").concat(x.price,"&type=").concat(x.type,"&img=").concat(x.img,"&quantity=").concat(x.quantity,"&size=").concat(x.size)}).then((function(e){return e.json()})).then((function(t){(console.log("retour du back === ",t.status),t.status)?function(){var a=Object(i.a)(o.a.mark((function a(){return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,localStorage.setItem("order",JSON.stringify(t.orderID));case 2:return a.next=4,localStorage.setItem("count",JSON.stringify(N(t.basket)));case 4:return a.next=6,e.newOrder(t.orderID);case 6:return a.next=8,e.newBasket(t.basket);case 8:return a.next=10,e.newCount(N(t.basket));case 10:R(!D);case 11:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}()():console.log("erreur")}));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return c.a.createElement("div",{className:"content"},c.a.createElement("a",{href:"/products",className:"backToSearch"},c.a.createElement(j.a,{className:"backArrow",icon:w.a}),c.a.createElement("h5",{className:"backCollec"},"Back to Collection")),c.a.createElement("div",{className:"productCard"},c.a.createElement("img",{className:"productsPic",src:"/".concat(b.img)}),D?c.a.createElement(A,{text:b.name}):null,c.a.createElement("div",{className:"productsText"},c.a.createElement("h3",null,b.name),c.a.createElement("div",null,c.a.createElement("h5",null,b.price,"\u20ac"),c.a.createElement("h5",null,b.type),c.a.createElement("form",{onSubmit:function(e){return B(e)},value:"Add to cart"},c.a.createElement("label",{className:"sizeInput"},"Size : "),c.a.createElement("select",{onChange:function(e){return I(Object(g.a)({},x,{size:e.target.value}))},required:!0},c.a.createElement("option",{value:""},"--"),c.a.createElement("option",{value:"S"},"S"),c.a.createElement("option",{value:"M"},"M"),c.a.createElement("option",{value:"L"},"L")),c.a.createElement("input",{type:"submit",className:"add-btn"}))))))})),B=function(){var e=Object(n.useState)({name:"",email:"",message:""}),t=Object(u.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)(!1),s=Object(u.a)(l,2),o=s[0],i=s[1];return o?c.a.createElement(m.a,{to:"/"}):c.a.createElement("div",{className:"content"},c.a.createElement("div",{className:"contactTitle",style:{height:60}},c.a.createElement("h3",{style:{fontSize:20,marginLeft:20}},"Contact Us")),c.a.createElement("div",{className:"contactBloc"},c.a.createElement("img",{className:"contactPic",src:"contact.jpg",alt:""}),c.a.createElement("form",{className:"contactForm",onSubmit:function(e){return function(e){e.preventDefault(),console.log("envoi formulaire",a),fetch("/api/contact",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"name=".concat(a.name,"&email=").concat(a.email,"&message=").concat(a.message)}).then((function(e){console.log("this message is saved",e),i(!0)})).catch((function(e){console.log("error",e)}))}(e)}},c.a.createElement("input",{className:"inputForm",type:"text",placeholder:"Name",onChange:function(e){return r(Object(g.a)({},a,{name:e.target.value}))},required:!0}),c.a.createElement("input",{className:"inputForm",type:"email",placeholder:"Email",onChange:function(e){return r(Object(g.a)({},a,{email:e.target.value}))},required:!0}),c.a.createElement("textarea",{className:"inputForm inputArea",placeholder:"Message",onChange:function(e){return r(Object(g.a)({},a,{message:e.target.value}))},required:!0}),c.a.createElement("button",{className:"contactButton",type:"submit"},"Send"))))};var L=Object(d.b)((function(e){return console.log("home page get user",e.basket),{prodList:e.basket}}),(function(e){return{newUser:function(t){console.log("je suis dans le NEW USER REDUCER",t),e({type:"setUser",user:t})},newCount:function(t){console.log("je suis dans le NEW COUNT REDUCER",t),e({type:"setCount",count:t})},newBasket:function(t){console.log("je suis dans le NEW BASKET REDUCERS",t),e({type:"updateBasket",basket:t})},newOrder:function(t){console.log("je suis dans le NEW ORDER REDUCER",t),e({type:"setOrder",order:t})}}}))((function(e){var t=f("user",""),a=Object(u.a)(t,2),r=a[0],l=(a[1],f("order","")),s=Object(u.a)(l,2),d=s[0],p=(s[1],Object(n.useState)({firstname:"",lastname:"",email:"",password:""})),b=Object(u.a)(p,2),h=b[0],v=b[1],O=Object(n.useState)({email:"",password:""}),j=Object(u.a)(O,2),w=j[0],C=j[1],S=Object(n.useState)(!1),k=Object(u.a)(S,2),x=k[0],I=k[1],T=Object(n.useState)({guest_id:"",status:!1}),P=Object(u.a)(T,2),D=P[0],A=(P[1],Object(n.useState)()),R=Object(u.a)(A,2),B=R[0],L=R[1];Object(n.useEffect)((function(){console.log("je recois quoi ? ?? ",e.prodList),function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/get-user-from-order",e.next=3,fetch("/api/get-user-from-order",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"orderID=".concat(d,"&userID=").concat(r)}).then((function(e){return e.json()})).then(function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y(t.userEmail)?(console.log("retour checkout",t),C(Object(g.a)({},w,{email:t.userEmail})),L(!0)):L(!1);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]);return x?c.a.createElement(m.a,{to:{pathname:"/payment",user:{id:D.guest_id,status:"user"}}}):c.a.createElement("div",{className:"blocCheckout"},c.a.createElement("form",{className:B?"form loginCheckoutBIG":"form loginCheckout",onSubmit:function(t){return function(t){t.preventDefault();fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"email=".concat(w.email,"&password=").concat(w.password,"&orderID=").concat(d)}).then((function(e){return e.json()})).then((function(t){if(console.log("hello ======",t),t.status){(function(){var a=Object(i.a)(o.a.mark((function a(){return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,localStorage.setItem("user",JSON.stringify(t.id));case 2:return a.next=4,localStorage.setItem("order",JSON.stringify(t.order));case 4:return a.next=6,localStorage.setItem("count",JSON.stringify(N(t.basket)));case 6:e.newUser(t.id),e.newOrder(t.order),e.newBasket(t.basket),e.newCount(N(t.basket));case 10:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}})()(),I(!0)}else{alert("le mot de passe et l'email ne correspondent pas")}}))}(t)}},B?c.a.createElement("h2",null,"Welcome Back ! ",c.a.createElement("br",null),c.a.createElement("br",null),"Log In"):c.a.createElement("h2",null,"LOG IN"),c.a.createElement("span",{className:"logContent"},c.a.createElement("label",null,"Email"),c.a.createElement("input",{className:"Login-input",name:"login_email",placeholder:"Votre email",onChange:function(e){return C(Object(g.a)({},w,{email:e.target.value}))},value:w.email,required:!0}),c.a.createElement("label",null,"Password"),c.a.createElement("input",{type:"password",className:"Login-input",name:"login_password",placeholder:"Votre mot de passe",onChange:function(e){return C(Object(g.a)({},w,{password:e.target.value}))},value:w.password,required:!0}),c.a.createElement(E.b,{className:"resetPass"},"Forgot your password ?")),c.a.createElement("input",{className:"button log",type:"submit",method:"post",value:"LOG IN"})),B?null:c.a.createElement("form",{className:"form loginCheckout",onSubmit:function(t){return function(t){t.preventDefault();fetch("/api/newuser",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"email=".concat(h.email,"&password=").concat(h.password,"&statut=user&orderID=").concat(d)}).then((function(e){return e.json()})).then((function(t){if(console.log("hello ============",t.status),t.status){(function(){var a=Object(i.a)(o.a.mark((function a(){return o.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,localStorage.setItem("user",JSON.stringify(t.id));case 2:e.newUser(t.id);case 3:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}})()(),I(!0)}else{alert("Un compte est d\xe9j\xe0 associ\xe9 \xe0 cet email")}}))}(t)}},c.a.createElement("h2",null,"REGISTER"),c.a.createElement("span",{className:"logContent"},c.a.createElement("h5",null,"If you still don't have a Squillace account, ",c.a.createElement("br",null),"use this registration form to join in."),c.a.createElement("label",null,"Email"),c.a.createElement("input",{type:"email",className:"Login-input",name:"login_email",placeholder:"Votre email",onChange:function(e){return v(Object(g.a)({},h,{email:e.target.value}))},value:h.email,required:!0}),c.a.createElement("label",null,"Password"),c.a.createElement("input",{type:"password",className:"Login-input",name:"login_password",placeholder:"Votre mot de passe",onChange:function(e){return v(Object(g.a)({},h,{password:e.target.value}))},value:h.password,required:!0})),c.a.createElement("input",{className:"button log",type:"submit",method:"post",value:"CREATE ACCOUNT"})),c.a.createElement("form",{className:"form guestCheckout"},c.a.createElement("h2",null,"SHOP AS GUEST"),c.a.createElement("span",{className:"logContent"},"You can complete your purchase as a guest, but you will need to fill out your details to place your order.",c.a.createElement("br",null),"You will be able to register and save your details for future purchases at the end of the order process."),c.a.createElement(E.b,{to:"/shippinginfo",className:"cartLink"},c.a.createElement("input",{className:"button log",type:"submit",method:"post",value:"CONTINUE AS GUEST"})),B?c.a.createElement("div",null,c.a.createElement("h2",null,"NEW CUSTOMER"),c.a.createElement("span",{className:"logContent"},"Create a new account"),c.a.createElement("input",{className:"button log",type:"submit",method:"post",onClick:function(e){return L(!1)},value:"CREATE ACCOUNT"})):null))}));var z=Object(d.b)((function(e){return console.log("home page get user",e.basket),{basket:e.basket}}),null)((function(e){var t=f("order",""),a=Object(u.a)(t,2),r=a[0],l=(a[1],Object(n.useState)([])),s=Object(u.a)(l,2),d=(s[0],s[1]),p=Object(n.useState)("nonUser"),b=Object(u.a)(p,2),h=b[0],y=b[1],v=Object(n.useState)({firstname:"",lastname:"",address:"",optional:"",zipcode:"",city:"",state:"",phone:"Phone",newsletter:!0,email:""}),O=Object(u.a)(v,2),j=O[0],w=O[1],C=Object(n.useState)({guest_id:"",status:!1}),S=Object(u.a)(C,2),k=S[0],x=S[1],I=Object(n.useState)(0),T=Object(u.a)(I,2),P=T[0],D=T[1],A=Object(n.useState)(0),R=Object(u.a)(A,2),B=R[0],L=R[1];Object(n.useEffect)((function(){(function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/cart",e.next=3,fetch("/api/cart",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"orderID=".concat(r)}).then((function(e){return e.json()})).then((function(e){e.status?(d(e.basket),console.log("je verifie que je recupere le bon panier: ",e.basket),D(e.totalCart),L(N(e.basket))):console.log("erreur")})).catch((function(e){return console.log("erreur fetch",e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);return k.status?c.a.createElement(m.a,{to:{pathname:"/payment",user:{id:k.guest_id,status:"guest"}}}):c.a.createElement("div",{className:"ShipBloc content"},c.a.createElement("form",{className:"checkOutForm",onSubmit:function(e){return function(e){console.log("send guest",j),e.preventDefault();fetch("/api/addguest",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"orderID=".concat(r,"&firstname=").concat(j.firstname,"&lastname=").concat(j.lastname,"&address=").concat(j.address,"&optional=").concat(j.optional,"&zipcode=").concat(j.zipcode,"&city=").concat(j.city,"&state=").concat(j.state,"&newsletter=").concat(j.newsletter,"&email=").concat(j.email)}).then((function(e){return e.json()})).then(function(){var e=Object(i.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("retour du back shipping info === ",t),!t.status){e.next=7;break}return e.next=4,localStorage.setItem("guest",JSON.stringify(t.guestID));case 4:x({guest_id:t.guestID,status:t.status}),e.next=8;break;case 7:y("userExistAlready");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}(e)}},c.a.createElement("div",{className:"shipForm"},c.a.createElement("input",{className:"checkoutInput",name:"firstname",type:"text",placeholder:"First Name",onChange:function(e){return w(Object(g.a)({},j,{firstname:e.target.value}))},value:j.firstname,required:!0}),c.a.createElement("input",{className:"checkoutInput",name:"lastname",type:"text",placeholder:"Last Name",onChange:function(e){return w(Object(g.a)({},j,{lastname:e.target.value}))},value:j.lastname,required:!0})),c.a.createElement("div",{className:"shipForm"},c.a.createElement("input",{className:"checkoutInput",name:"Address",type:"text",placeholder:"Address",onChange:function(e){return w(Object(g.a)({},j,{address:e.target.value}))},value:j.address,required:!0}),c.a.createElement("input",{className:"checkoutInput",name:"address2",type:"text",placeholder:"Optional",onChange:function(e){return w(Object(g.a)({},j,{optional:e.target.value}))},value:j.optional})),c.a.createElement("div",{className:"shipForm"},c.a.createElement("input",{className:"checkoutInput",name:"ZIP Code",placeholder:"ZIP Code",type:"text",pattern:"[0-9]*",onChange:function(e){return w(Object(g.a)({},j,{zipcode:e.target.value}))},value:j.zipcode,required:!0}),c.a.createElement("input",{className:"checkoutInput",name:"city",type:"text",placeholder:"City/Town",onChange:function(e){return w(Object(g.a)({},j,{city:e.target.value}))},value:j.city,required:!0})),c.a.createElement("div",{className:"shipForm"},c.a.createElement("input",{className:"checkoutInput",name:"state",type:"text",placeholder:"State",onChange:function(e){return w(Object(g.a)({},j,{state:e.target.value}))},value:j.state,required:!0}),c.a.createElement("input",{className:"checkoutInput",name:"phone",type:"tel",placeholder:"Phone",onChange:function(e){return w(Object(g.a)({},j,{phone:e.target.value}))},pattern:"^[0-9]{10}$",value:j.phone,required:!0})),c.a.createElement("div",{className:"shipForm"},c.a.createElement("input",{className:"checkoutInput",name:"email",type:"email",placeholder:"Email",onChange:function(e){return w(Object(g.a)({},j,{email:e.target.value}))},value:j.email,required:!0})),c.a.createElement("div",{className:"shipCheckbox"},c.a.createElement("input",{className:"checkboxInput",name:"Checkbox",type:"checkbox",onChange:function(e){w(Object(g.a)({},j,{newsletter:e.target.checked}))},value:j.newsletter}),c.a.createElement("label",null,"I wish to receive Squillace's newsletter")),c.a.createElement("div",{className:"shipForm ".concat(h)},c.a.createElement("h5",{className:"logLink"},"There is already an account associated with this email, please : "),c.a.createElement(E.b,{className:"logLink2",to:"/checkout"},"Log In")),c.a.createElement("input",{className:"button log",name:"Checkout",type:"submit",value:"CONTINUE"})),c.a.createElement("div",{className:"totalCartship",style:{display:"flex",justifyContent:"space-around"}},c.a.createElement("h5",{className:"h5marg"},"SHOPPING BAG TOTAL (",B," items)"),c.a.createElement("h5",{className:"h5marg"},"Log in to order with your account"),c.a.createElement(E.b,{to:"/login",className:"cartLink"},c.a.createElement("button",{className:"btnCart"},"SIGN IN")),c.a.createElement("div",{className:"totalCartElments"},c.a.createElement("div",{className:"totalCartElmt L"},c.a.createElement("h5",{className:"h5marg"},"Order value :"),c.a.createElement("h5",{className:"h5marg"},"Shipping :"),c.a.createElement("h5",{className:"h5marg"},"TOTAL :")),c.a.createElement("div",{className:"totalCartElmt R"},c.a.createElement("h5",{className:"h5marg"},P,"\u20ac"),c.a.createElement("h5",{className:"h5marg"},"FREE"),c.a.createElement("h5",{className:"h5marg"},P,"\u20ac")))))}));function q(e){var t=new Date(e),a=t.getDate(),n=t.getMonth()+1,c=t.getFullYear();return a<10&&n<10?"0".concat(a,"/0").concat(n,"/").concat(c):a<10?"0".concat(a,"/").concat(n,"/").concat(c):n<10?"".concat(a,"/0").concat(n,"/").concat(c):"".concat(a,"/").concat(n,"/").concat(c)}var U=Object(d.b)((function(e){return console.log("Account get user",e.user),{name:e.user}}),null)((function(e){var t=f("user",[]),a=Object(u.a)(t,2),r=a[0],l=(a[1],Object(n.useState)({firstname:"",lastname:"",email:""})),s=Object(u.a)(l,2),m=s[0],d=s[1],p=Object(n.useState)([]),g=Object(u.a)(p,2),b=g[0],h=g[1],v=Object(n.useState)(!1),O=Object(u.a)(v,2),C=O[0],S=O[1];Object(n.useEffect)((function(){(function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"/api/myaccount",fetch("/api/myaccount",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"id=".concat(r)}).then((function(e){return e.json()})).then((function(e){console.log("retour du back === ",e.user.firstname),d({firstname:e.user.firstname,lastname:e.user.lastname,email:e.user.email}),h(e.orders),void 0!=e.user.firstname&&S(!0)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var k=function(){var e=Object(i.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("id a afficher",t,a),document.getElementById("".concat(a)).className="showOrderDetails",document.getElementById("bloc".concat(a)).className="orderCardExpand",document.getElementById("img".concat(a)).className="hide",document.getElementById("show".concat(a)).className="hide",document.getElementById("OrderInfo".concat(a)).className="hide",document.getElementById("showless".concat(a)).className="displayOrder",document.getElementById("fullOrderInfo".concat(a)).className="fullOrderInfo",document.getElementById("OrderTitle".concat(a)).className="orderTitles";case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),x=function(){var e=Object(i.a)(o.a.mark((function e(t,a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("id a afficher",t,a),document.getElementById("".concat(a)).className="hide",document.getElementById("bloc".concat(a)).className="orderCard",document.getElementById("showless".concat(a)).className="hide",document.getElementById("fullOrderInfo".concat(a)).className="hide",document.getElementById("OrderTitle".concat(a)).className="hide",document.getElementById("img".concat(a)).className="accountPic",document.getElementById("show".concat(a)).className="displayOrder",document.getElementById("OrderInfo".concat(a)).className="orderDetails";case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),I=b.map((function(e,t){var a=e.productList.map((function(e,t){return c.a.createElement("div",{className:"productListAccount"},c.a.createElement("img",{className:"accountPic",src:e.img}),c.a.createElement("div",{className:"prodListDetail"},c.a.createElement("h5",{style:{fontWeight:"bold"}},e.name),c.a.createElement("h5",null,e.size),c.a.createElement("h5",null,e.price/e.quantity,"\u20ac"),c.a.createElement("h5",null,"Quantity : ",e.quantity),c.a.createElement("div",{className:"prodListDetailPrice"},c.a.createElement("h5",{style:{fontWeight:"bold"}},e.price,"\u20ac"))))}));return c.a.createElement("div",{className:"orderCard",id:"bloc".concat(t)},c.a.createElement("img",{className:"accountPic",id:"img".concat(t),src:e.productList[0].img}),c.a.createElement("span",{className:"orderCardSub"},c.a.createElement("div",{className:"hide",onClick:function(a){return x(e._id,t)},id:"showless".concat(t)},c.a.createElement("h5",{className:"showdetail"},"Show less"),c.a.createElement(j.a,{className:"settingHeadR",icon:w.d})),c.a.createElement("h3",{className:"order"},"Order  -  ",q(e.validationdate)),c.a.createElement("span",{className:"orderDetails",id:"OrderInfo".concat(t)},c.a.createElement("h5",null,"Ref : ",e._id),c.a.createElement("h5",null,"Status : fulfilled"),c.a.createElement("h5",null,"Date : ",q(e.validationdate)),c.a.createElement("h5",null,"Total : ",e.totalorder,"\u20ac")),c.a.createElement("h5",{className:"hide",id:"OrderTitle".concat(t)},"Order Details"),c.a.createElement("div",{className:"hide",id:"fullOrderInfo".concat(t)},c.a.createElement("span",{className:y(e.billingaddress)?"orderDetailsExpandthreeL":"orderDetailsExpandL"},c.a.createElement("h5",{style:{fontWeight:"bold"}},"Shipping Address"),c.a.createElement("h5",{style:{marginBottom:2}},e.firstname," ",e.lastname),c.a.createElement("h5",{style:{marginBottom:2,marginTop:2}},e.optional),c.a.createElement("h5",{style:{marginBottom:2,marginTop:2}},e.address),c.a.createElement("h5",{style:{marginBottom:2,marginTop:2}},e.zipcode," ",e.city),c.a.createElement("h5",{style:{marginBottom:2,marginTop:2}},e.state)),y(e.billingaddress)?c.a.createElement("span",{className:"orderDetailsExpandM"},c.a.createElement("h5",{style:{fontWeight:"bold"}},"Billing Address"),c.a.createElement("h5",{style:{marginBottom:2}},e.compagnyname),c.a.createElement("h5",{style:{marginBottom:2,marginTop:2}},e.billingoptional),c.a.createElement("h5",{style:{marginBottom:2,marginTop:2}},e.billingaddress),c.a.createElement("h5",{style:{marginBottom:2,marginTop:2}},e.billingzipcode," ",e.billingcity),c.a.createElement("h5",{style:{marginBottom:2,marginTop:2}},e.billingstate)):null,c.a.createElement("span",{className:y(e.billingaddress)?"orderDetailsExpandthreeR":"orderDetailsExpandR"},c.a.createElement("h5",null,"Date : ",q(e.validationdate)),c.a.createElement("h5",{style:{fontWeight:"bold"}},"Total : ",e.totalorder,"\u20ac"))),c.a.createElement("div",{className:"displayOrder",onClick:function(a){return k(e._id,t)},id:"show".concat(t)},c.a.createElement("h5",{className:"showdetail"},"Show more"),c.a.createElement(j.a,{className:"settingHeadR",icon:w.e})),c.a.createElement("div",{id:t,className:"hide"},c.a.createElement("h5",{className:"orderTitles"},"Order Summary"),a,c.a.createElement("div",{className:"resumeOrder"},c.a.createElement("h5",{className:"prodListTotalQty"},N(e.productList)," items"),c.a.createElement("h5",{className:"prodListTotalPrice"},"Total : ",e.totalorder,"\u20ac")))))}));return c.a.createElement("div",{className:"accountBloc content"},c.a.createElement("div",{className:"accountsetting"},c.a.createElement("h3",null,"Hello ",C?"".concat(m.firstname," ").concat(m.lastname):m.email),c.a.createElement("div",{className:"mobil"},c.a.createElement(E.b,{to:"/myaccount",className:"linkaccount"},c.a.createElement("h5",{className:"settingHeadL"},"My Purchases"),c.a.createElement(j.a,{className:"settingHeadR",icon:w.b})),c.a.createElement(E.b,{to:"/mysettings",className:"linkaccount"},c.a.createElement("h5",{className:"settingHeadL"},"My Settings"),c.a.createElement(j.a,{className:"settingHeadR",icon:w.b})),c.a.createElement(E.b,{to:"/signout",className:"linkaccount"},c.a.createElement("h5",{className:"settingHeadL"},"Log Out"),c.a.createElement(j.a,{className:"settingHeadR",icon:w.b})),c.a.createElement("h5",null,"Need Help ?"),c.a.createElement(E.b,{to:"/contact",className:"linkaccount"},c.a.createElement("h5",{className:"settingHeadL"},"Contact Us"),c.a.createElement(j.a,{className:"settingHeadR",icon:w.b})))),c.a.createElement("div",{className:"accountOrder"},c.a.createElement("h3",null,"My Purchases"),I))})),H=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),r=a[0],l=a[1],s=f("user",[]),m=Object(u.a)(s,2),d=m[0],p=(m[1],Object(n.useState)({firstname:"",lastname:"",address:"",optional:"",zipcode:"",city:"",state:"",newsletter:!1,email:"",gender:"",phone:"",compagnyname:"",billingname:"",billingaddress:"",billingoptional:"",billingzipcode:"",billingcity:"",billingstate:"",statut:"",inscription:"",birthday:"",orders:[]})),b=Object(u.a)(p,2),N=b[0],y=b[1];Object(n.useEffect)((function(){(function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"/api/getuser",fetch("/api/getuser",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"id=".concat(d)}).then((function(e){return e.json()})).then((function(e){console.log("retour du back === ",e.user.firstname);var t=e.user.phone;void 0!=t&&(t="+33".concat(e.user.phone));var a=e.user.birthday;void 0!=a&&(a=q(e.user.birthday)),void 0!=e.user.billingaddress&&l(!0),y({firstname:e.user.firstname,lastname:e.user.lastname,address:e.user.address,optional:e.user.optional,zipcode:e.user.zipcode,city:e.user.city,state:e.user.state,newsletter:e.user.newsletter,email:e.user.email,gender:e.user.gender,phone:t,compagnyname:e.user.compagnyname,billingname:e.user.billingname,billingaddress:e.user.billingaddress,billingoptional:e.user.billingoptional,billingzipcode:e.user.billingzipcode,billingcity:e.user.billingcity,billingstate:e.user.billingstate,statut:e.user.statut,inscription:e.user.inscription,birthday:a,orders:e.user.orders})}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);return c.a.createElement("div",{className:"settingsBloc content"},c.a.createElement("a",{href:"/myaccount",className:"backToSearch"},c.a.createElement(j.a,{className:"backArrow",icon:w.a}),c.a.createElement("h5",{className:"backCollec"},"Back to my Account")),c.a.createElement("div",{className:"settingstitle"},c.a.createElement("h4",null,"My settings"),c.a.createElement("p",null,"You can manage your account and subscriptions here")),c.a.createElement("div",{className:"settingsdetails"},c.a.createElement("div",{className:"settingSubTitle"},c.a.createElement("h5",{className:"settingSubTitleDetailL"},"My Details"),c.a.createElement(E.b,{to:"/settingsform/details",className:"settingSubTitleDetailR"},"Edit")),c.a.createElement("div",{className:"settingsContent"},c.a.createElement("label",null,"First Name"),c.a.createElement("h5",null,N.firstname),c.a.createElement("label",null,"Last Name"),c.a.createElement("h5",null,N.lastname),c.a.createElement("label",null,"Email"),c.a.createElement("h5",null,N.email),c.a.createElement("label",null,"Date of birth"),c.a.createElement("h5",null,N.birthday),c.a.createElement("label",null,"Phone"),c.a.createElement("h5",null,N.phone),c.a.createElement("label",null,"Gender"),c.a.createElement("h5",null,N.gender))),c.a.createElement("div",{className:"settingsdetails"},c.a.createElement("div",{className:"settingSubTitle"},c.a.createElement("h5",{className:"settingSubTitleDetailL"},"My Addresses"),c.a.createElement(E.b,{to:"/settingsform/address",className:"settingSubTitleDetailR"},"Edit")),c.a.createElement("div",{className:"settingsContent"},c.a.createElement("label",null,"Address"),c.a.createElement("h5",null,N.address),c.a.createElement("label",{className:h(N.optional)?"hide":null},"Optional"),c.a.createElement("h5",{className:h(N.optional)?"hide":null},N.optional),c.a.createElement("label",null,"Zipcode"),c.a.createElement("h5",null,N.zipcode),c.a.createElement("label",null,"City"),c.a.createElement("h5",null,N.city),c.a.createElement("label",null,"State"),c.a.createElement("h5",null,N.state)),c.a.createElement("div",{className:r?"settingsContent":"hide"},c.a.createElement("label",{className:h(N.compagnyname)?"hide":null},"Billing Name"),c.a.createElement("h5",{className:h(N.compagnyname)?"hide":null},N.compagnyname),c.a.createElement("label",null,"Billing Address"),c.a.createElement("h5",null,N.billingaddress),c.a.createElement("label",{className:h(N.billingoptional)?"hide":null},"Optional"),c.a.createElement("h5",{className:h(N.billingoptional)?"hide":null},N.billingoptional),c.a.createElement("label",null,"Zipcode"),c.a.createElement("h5",null,N.billingzipcode),c.a.createElement("label",null,"City"),c.a.createElement("h5",null,N.billingcity),c.a.createElement("label",null,"State"),c.a.createElement("h5",null,N.billingstate))),c.a.createElement("div",{className:"settingsdetails"},c.a.createElement("div",{className:"settingSubTitle"},c.a.createElement("h5",{className:"settingSubTitleDetailL"},"Newsletter Subscription")),c.a.createElement("div",{className:"settingsContent"},c.a.createElement("div",{className:"newsletterSubTitle"},c.a.createElement("label",{className:"newsDetailL"},"Newsletter Subscription"),c.a.createElement("h5",{className:"newsDetailR",onClick:function(e){return function(e){e.preventDefault();fetch("/api/usersubcription",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"id=".concat(d,"&newsletter=").concat(!N.newsletter)}).then((function(e){return e.json()})).then((function(e){e.status&&y(Object(g.a)({},N,{newsletter:!N.newsletter}))}))}(e)}},N.newsletter?"ON":"OFF")))),c.a.createElement("div",{className:"settingsdetails"},c.a.createElement("div",{className:"settingSubTitle"},c.a.createElement("h5",{className:"settingSubTitleDetailL"},"Privacy")),c.a.createElement("div",{className:"settingsContent"},c.a.createElement("label",{className:"updatePass"},c.a.createElement(E.b,{to:"/updatepass"},"Change Password")))))},F=a(15),W={style:{base:{color:"#32325d",fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#aab7c4"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}}};function _(e,t,a,n,c,r,l,s){return M.apply(this,arguments)}function M(){return(M=Object(i.a)(o.a.mark((function e(t,a,n,c,r,l,s,i){var u,m;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u={token:t.id,userID:a,user:n,firstname:c,lastname:r,basket:l,orderID:s,totalCart:i},"/api/charge",e.next=4,fetch("/api/charge",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(u)}).then((function(e){return e.json()})).then((function(e){return console.log("retour back",e.status),!!e.status})).catch((function(e){console.log("error == ",e)}));case 4:return m=e.sent,e.abrupt("return",m);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var J=Object(d.b)(null,(function(e){return{newCount:function(t){console.log("je suis dans le NEW COUNT REDUCER",t),e({type:"setCount",count:t})},newBasket:function(t){console.log("je suis dans le NEW BASKET REDUCERS",t),e({type:"updateBasket",basket:t})},newOrder:function(t){console.log("je suis dans le NEW ORDER REDUCER",t),e({type:"setOrder",order:t})}}}))((function(e){var t=Object(F.useStripe)(),a=Object(F.useElements)(),r=f("user",""),l=Object(u.a)(r,2),s=l[0],m=(l[1],f("guest","")),d=Object(u.a)(m,2),p=d[0],b=(d[1],Object(n.useState)({firstname:"",lastname:"",orderID:"",basket:[],totalCart:0})),E=Object(u.a)(b,2),h=E[0],N=E[1],v=Object(n.useState)(""),O=Object(u.a)(v,2);O[0],O[1];Object(n.useEffect)((function(){console.log("je recois quoi de mon element payment ? ?? ",e.user,e.basket,e.orderID,e.totalCart),N({firstname:e.user.firstname,lastname:e.user.lastname,basket:e.basket,orderID:e.orderID,totalCart:e.totalCart})}),[]);var j=function(){var n=Object(i.a)(o.a.mark((function n(c){var r,l,u;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(c.preventDefault(),t&&a){n.next=3;break}return n.abrupt("return");case 3:return r=a.getElement(F.CardElement),n.next=6,t.createToken(r);case 6:if(!(l=n.sent).error){n.next=11;break}console.log("error stripe",l.error.message),n.next=16;break;case 11:return n.next=13,_(l.token,y(s)?s:p,e.user,h.firstname,h.lastname,h.basket,h.orderID,h.totalCart);case 13:u=n.sent,console.log("retour back",u),u?(console.log("merci panier valid\xe9!"),function(){var t=Object(i.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,window.localStorage.removeItem("order");case 2:return t.next=4,window.localStorage.removeItem("count");case 4:return t.next=6,window.localStorage.removeItem("guest");case 6:return t.next=8,e.newCount(0);case 8:return t.next=10,e.newBasket([]);case 10:return t.next=12,e.newOrder("");case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()(),e.setPaymentValid(!0)):console.log("ooops erreur!");case 16:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return c.a.createElement("form",{onSubmit:j},c.a.createElement("h4",null,"Proceed to Payment"),c.a.createElement("div",{className:"subPaymentName"},c.a.createElement("div",{className:"subPayment"},c.a.createElement("label",null,"First Name"),c.a.createElement("input",{type:"text",name:"firstname",value:h.firstname,required:!0,onChange:function(e){return N(Object(g.a)({},h,{firstname:e.target.value}))}}),c.a.createElement("h6",null,"As it appears on your card.")),c.a.createElement("div",{className:"subPayment"},c.a.createElement("label",null,"Last Name"),c.a.createElement("input",{type:"text",name:"lastname",value:h.lastname,required:!0,onChange:function(e){return N(Object(g.a)({},h,{lastname:e.target.value}))}}),c.a.createElement("h6",null,"As it appears on your card."))),c.a.createElement("label",null,"Card details"),c.a.createElement("div",{className:"subPaymentINFO"},c.a.createElement(F.CardElement,{className:"input",options:W}),c.a.createElement("div",{className:"subCardInfo"},c.a.createElement("h6",null,"Card number"),c.a.createElement("h6",null,"Enter the expiration date on your card"),c.a.createElement("h6",null,"Security Code printed on your card, 3-4 digits."))),c.a.createElement("div",null),c.a.createElement("button",{className:"button log",type:"submit",disabled:!t},"Process to Payment"))})),G=a(31),V=function(e){Object(F.useStripe)(),Object(F.useElements)();var t=f("user",""),a=Object(u.a)(t,2),r=a[0],l=(a[1],f("guest","")),s=Object(u.a)(l,2),m=s[0],d=(s[1],Object(n.useState)(!1)),p=Object(u.a)(d,2),b=p[0],E=p[1],N=Object(n.useState)(!1),v=Object(u.a)(N,2),O=v[0],w=v[1],S=Object(n.useState)(!1),k=Object(u.a)(S,2),x=k[0],I=k[1],T=Object(n.useState)({firstname:"",lastname:"",address:"",optional:"",zipcode:"",city:"",state:"",phone:""}),P=Object(u.a)(T,2),D=P[0],A=P[1],R=Object(n.useState)({compagnyname:"",billingaddress:"",billingoptional:"",billingzipcode:"",billingcity:"",billingstate:""}),B=Object(u.a)(R,2),L=B[0],z=B[1],q=Object(n.useState)(""),U=Object(u.a)(q,2),H=U[0],W=(U[1],Object(n.useState)({firstname:"",lastname:"",address:"",optional:"",zipcode:"",state:"",city:"",newsletter:"",email:"",gender:"",phone:"",compagnyname:"",billingaddress:"",billingoptional:"",billingzipcode:"",billingcity:"",billingstate:"",statut:"",inscription:"",birthday:"",orders:[]})),_=Object(u.a)(W,2),M=_[0],J=_[1];Object(n.useEffect)((function(){(function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"/api/getuser",fetch("/api/getuser",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"id=".concat(r,"&guestID=").concat(m)}).then((function(e){return e.json()})).then((function(e){console.log("retour du back checkoutshipform === ",e,y(e.address)),y(e.user.address)?(console.log("JE SUIS PASSE LA !!"),J({firstname:e.user.firstname,lastname:e.user.lastname,address:e.user.address,optional:e.user.optional,zipcode:e.user.zipcode,city:e.user.city,state:e.user.state,newsletter:e.user.newsletter,email:e.user.email,gender:e.user.gender,phone:e.user.phone,compagnyname:e.user.compagnyname,billingname:e.user.billingname,billingaddress:e.user.billingaddress,billingoptional:e.user.billingoptional,billingzipcode:e.user.billingzipcode,billingcity:e.user.billingcity,billingstate:e.user.billingstate,statut:e.user.statut,inscription:e.user.inscription,birthday:e.user.birthday,orders:e.user.orders})):I(!0)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var G=function(t,a){t.preventDefault(),e.setnewUser(M);fetch("/api/addshippingaddress",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"id=".concat(y(r)?r:m,"&firstname=").concat(M.firstname,"&lastname=").concat(M.lastname,"&address=").concat(M.address,"&optional=").concat(M.optional,"&zipcode=").concat(M.zipcode,"&city=").concat(M.city,"&state=").concat(M.state)}).then((function(e){return e.json()})).then((function(t){t.status?(e.setValidShowPayment(!0),"Ship"===a?I(!1):E(!1)):console.log("erreur")}))};return c.a.createElement("div",null,c.a.createElement("div",{className:x?null:"hide"},c.a.createElement("form",{onSubmit:function(e){return G(e,"Ship")}},c.a.createElement("h4",null,H),c.a.createElement("div",{className:"settingsContent setForm"},c.a.createElement("h5",null,"Shipping Address"),c.a.createElement("div",{className:"popupAddressT"},c.a.createElement("div",{className:"popupAddressL"},c.a.createElement("label",null,"First Name"),c.a.createElement("input",{className:"settingInput",type:"text",name:"firstname",onChange:function(e){return J(Object(g.a)({},M,{firstname:e.target.value}))},value:M.firstname})),c.a.createElement("div",{className:"popupAddressR"},c.a.createElement("label",null,"Last Name"),c.a.createElement("input",{className:"settingInput",type:"text",name:"lastname",onChange:function(e){return J(Object(g.a)({},M,{lastname:e.target.value}))},value:M.lastname,required:!0}))),c.a.createElement("label",null,"Address"),c.a.createElement("input",{className:"settingInput",type:"text",name:"address",onChange:function(e){return J(Object(g.a)({},M,{address:e.target.value}))},value:M.address,required:!0}),c.a.createElement("label",null,"Optional"),c.a.createElement("input",{className:"settingInput",type:"text",name:"detail",onChange:function(e){return J(Object(g.a)({},M,{optional:e.target.value}))},value:M.optional}),c.a.createElement("label",null,"Zipcode"),c.a.createElement("input",{className:"settingInput",name:"zipcode",type:"text",pattern:"[0-9]*",onChange:function(e){return J(Object(g.a)({},M,{zipcode:e.target.value}))},value:M.zipcode,required:!0}),c.a.createElement("div",{className:"popupAddressT"},c.a.createElement("div",{className:"popupAddressL"},c.a.createElement("label",null,"City"),c.a.createElement("input",{className:"settingInput",type:"text",name:"city",onChange:function(e){return J(Object(g.a)({},M,{city:e.target.value}))},value:M.city})),c.a.createElement("div",{className:"popupAddressR"},c.a.createElement("label",null,"State"),c.a.createElement("input",{className:"settingInput",type:"text",name:"state",onChange:function(e){return J(Object(g.a)({},M,{state:e.target.value}))},value:M.state,required:!0}))),c.a.createElement("label",null,"Contact Phone"),c.a.createElement("input",{className:"settingInput",type:"text",name:"phone",onChange:function(e){return J(Object(g.a)({},M,{phone:e.target.value}))},value:M.phone})),c.a.createElement("div",{className:"center"},c.a.createElement("input",{type:"submit",className:"address",value:"CONTINUE"})))),c.a.createElement("div",{className:x?"hide":null},c.a.createElement("div",{className:b?"hide":"paymentSub"},c.a.createElement("div",{className:"paymentAddress"},c.a.createElement("h5",null,"Shipping Address"),c.a.createElement("h6",null,M.firstname," ",M.lastname),c.a.createElement("h6",null,M.optional),c.a.createElement("h6",null,M.address),c.a.createElement("h6",null,M.zipcode," ",M.city),c.a.createElement("h6",null,M.state),c.a.createElement("h6",{className:h(M.phone)?"hide":null},"Contact Phone: +33",M.phone)),c.a.createElement("div",{className:h(M.billingaddress)||O?"hide":"paymentAddress"},c.a.createElement("h5",null,"Billing Address"),c.a.createElement("h6",null,M.compagnyname),c.a.createElement("h6",null,M.billingoptional),c.a.createElement("h6",null,M.billingaddress),c.a.createElement("h6",null,M.billingzipcode," ",M.billingcity),c.a.createElement("h6",null,M.billingstate))),c.a.createElement("div",{className:b?"hide":"paymentSub"},c.a.createElement("input",{className:"button payChangeInfo",onClick:function(e){E(!b),A({firstname:M.firstname,lastname:M.lastname,address:M.address,optional:M.optional,zipcode:M.zipcode,city:M.city,state:M.state,phone:M.phone})},value:"Change Shipping Info"}),h(M.billingaddress)?c.a.createElement("div",{className:"payChangeInfo",onClick:function(e){w(!O)}},c.a.createElement(j.a,{className:"icon",icon:C.a})," Add Billing Address"):null,c.a.createElement("input",{className:h(M.billingstate)||O?"hide":"button payChangeInfo",onClick:function(e){w(!O),z({compagnyname:M.compagnyname,billingaddress:M.billingaddress,billingoptional:M.billingoptional,billingzipcode:M.billingzipcode,billingcity:M.billingcity,billingstate:M.billingstate})},value:"Change Billing Info"})),c.a.createElement("form",{className:b?null:"hide",onSubmit:function(e){return G(e,"correct")}},c.a.createElement(j.a,{className:"popcross",icon:C.c,onClick:function(e){E(!b),J(Object(g.a)({},M,{firstname:D.firstname,lastname:D.lastname,address:D.address,optional:D.optional,zipcode:D.zipcode,city:D.city,state:D.state,phone:D.phone}))}}),c.a.createElement("h4",null,H),c.a.createElement("div",{className:"settingsContent setForm"},c.a.createElement("h5",null,"Shipping Address"),c.a.createElement("div",{className:"popupAddressT"},c.a.createElement("div",{className:"popupAddressL"},c.a.createElement("label",null,"First Name"),c.a.createElement("input",{className:"settingInput",type:"text",name:"firstname",onChange:function(e){return J(Object(g.a)({},M,{firstname:e.target.value}))},value:M.firstname})),c.a.createElement("div",{className:"popupAddressR"},c.a.createElement("label",null,"Last Name"),c.a.createElement("input",{className:"settingInput",type:"text",name:"lastname",onChange:function(e){return J(Object(g.a)({},M,{lastname:e.target.value}))},value:M.lastname,required:!0}))),c.a.createElement("label",null,"Address"),c.a.createElement("input",{className:"settingInput",type:"text",name:"address",onChange:function(e){return J(Object(g.a)({},M,{address:e.target.value}))},value:M.address,required:!0}),c.a.createElement("label",null,"Optional"),c.a.createElement("input",{className:"settingInput",type:"text",name:"detail",onChange:function(e){return J(Object(g.a)({},M,{optional:e.target.value}))},value:M.optional}),c.a.createElement("label",null,"Zipcode"),c.a.createElement("input",{className:"settingInput",name:"zipcode",type:"text",pattern:"[0-9]*",onChange:function(e){return J(Object(g.a)({},M,{zipcode:e.target.value}))},value:M.zipcode,required:!0}),c.a.createElement("div",{className:"popupAddressT"},c.a.createElement("div",{className:"popupAddressL"},c.a.createElement("label",null,"City"),c.a.createElement("input",{className:"settingInput",type:"text",name:"city",onChange:function(e){return J(Object(g.a)({},M,{city:e.target.value}))},value:M.city})),c.a.createElement("div",{className:"popupAddressR"},c.a.createElement("label",null,"State"),c.a.createElement("input",{className:"settingInput",type:"text",name:"state",onChange:function(e){return J(Object(g.a)({},M,{state:e.target.value}))},value:M.state,required:!0}))),c.a.createElement("label",null,"Contact Phone"),c.a.createElement("input",{className:"settingInput",type:"number",name:"phone",onChange:function(e){return J(Object(g.a)({},M,{phone:e.target.value}))},value:M.phone})),c.a.createElement("div",{className:"center"},c.a.createElement("input",{type:"submit",className:"address",value:"CHANGE SHIPPING ADDRESS"}))),c.a.createElement("form",{className:O?null:"hide",onSubmit:function(t){return function(t,a){t.preventDefault(),e.setnewUser(M);fetch("/api/updateuseraddress",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"id=".concat(y(r)?r:m,"&firstname=").concat(M.firstname,"&lastname=").concat(M.lastname,"&address=").concat(M.address,"&optional=").concat(M.optional,"&zipcode=").concat(M.zipcode,"&city=").concat(M.city,"&state=").concat(M.state,"&compagnyname=").concat(M.compagnyname,"&billingaddress=").concat(M.billingaddress,"&billingoptional=").concat(M.billingoptional,"&billingzipcode=").concat(M.billingzipcode,"&billingcity=").concat(M.billingcity,"&billingstate=").concat(M.billingstate)}).then((function(e){return e.json()})).then((function(e){console.log("retour du back === ",e.status),e.status?(console.log(e),"Ship"===a?E(!1):"Bill"===a?w(!1):"NewShip"===a&&I(!1)):console.log("erreur")}))}(t,"Bill")}},c.a.createElement(j.a,{className:"popcross",icon:C.c,onClick:function(e){w(!O),J(Object(g.a)({},M,{compagnyname:L.compagnyname,billingaddress:L.billingaddress,billingoptional:L.billingoptional,billingzipcode:L.billingzipcode,billingcity:L.billingcity,billingstate:L.billingstate}))}}),c.a.createElement("h4",null,"Billing Address"),c.a.createElement("div",null,c.a.createElement("label",null,"Compagny Name (optional)"),c.a.createElement("input",{className:"settingInput",type:"text",name:"compagnyname",onChange:function(e){return J(Object(g.a)({},M,{compagnyname:e.target.value}))},value:M.compagnyname}),c.a.createElement("label",null,"Address"),c.a.createElement("input",{className:"settingInput",type:"text",name:"billingaddress",onChange:function(e){return J(Object(g.a)({},M,{billingaddress:e.target.value}))},value:M.billingaddress,required:!0}),c.a.createElement("label",null,"Optional"),c.a.createElement("input",{className:"settingInput",type:"text",name:"detail",onChange:function(e){return J(Object(g.a)({},M,{billingoptional:e.target.value}))},value:M.billingoptional}),c.a.createElement("label",null,"Zipcode"),c.a.createElement("input",{className:"settingInput",name:"zipcode",type:"text",pattern:"[0-9]*",onChange:function(e){return J(Object(g.a)({},M,{billingzipcode:e.target.value}))},value:M.billingzipcode,required:!0}),c.a.createElement("div",{className:"popupAddressT"},c.a.createElement("div",{className:"popupAddressL"},c.a.createElement("label",null,"City"),c.a.createElement("input",{className:"settingInput",type:"text",name:"city",onChange:function(e){return J(Object(g.a)({},M,{billingcity:e.target.value}))},value:M.billingcity})),c.a.createElement("div",{className:"popupAddressR"},c.a.createElement("label",null,"State"),c.a.createElement("input",{className:"settingInput",type:"text",name:"state",onChange:function(e){return J(Object(g.a)({},M,{billingstate:e.target.value}))},value:M.billingstate,required:!0})))),c.a.createElement("div",{className:"center"},c.a.createElement("input",{type:"submit",className:"address",value:"CHANGE BILLING ADDRESS"})))))};var Y=Object(G.a)("pk_test_gVPvQdtolFZzYQmPVqUw324Z00y8aGU5CX"),Z=Object(d.b)((function(e){return console.log("payment get user",e.user),{user:e.user,prodList:e.basket}}),null)((function(e){var t=Object(n.useState)([]),a=Object(u.a)(t,2),r=a[0],l=a[1],s=f("user",""),d=Object(u.a)(s,2),p=d[0],g=(d[1],f("guest","")),b=Object(u.a)(g,2),E=b[0],h=(b[1],f("order","")),v=Object(u.a)(h,2),O=v[0],j=(v[1],Object(n.useState)()),w=Object(u.a)(j,2),C=w[0],S=w[1],k=Object(n.useState)(!1),x=Object(u.a)(k,2),I=x[0],T=x[1],D=Object(n.useState)(!1),A=Object(u.a)(D,2),R=A[0],B=A[1],L=Object(n.useState)(0),z=Object(u.a)(L,2),q=z[0],U=z[1],H=Object(n.useState)(0),W=Object(u.a)(H,2),_=W[0],M=W[1];Object(n.useEffect)((function(){(function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"/api/getuserandcart",fetch("/api/getuserandcart",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"userID=".concat(y(p)?p:E,"&orderID=").concat(O)}).then((function(e){return e.json()})).then((function(e){console.log("retour du back payment page ==",e),S(e.user),l(e.basket),console.log("je verifie que je recupere le bon panier: et compte",e,y(e.user.address)),U(P(e.totalCart)),M(N(e.basket)),y(e.user.address)?T(!0):T(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]);var G=r.map((function(e,t){return c.a.createElement("div",{className:"productCart",key:t},c.a.createElement("div",{className:"payDetailL"},c.a.createElement("img",{className:"payPic",src:e.img}),c.a.createElement("h5",{className:"payProdName"},e.name)),c.a.createElement("h6",{className:"payDetailR"},e.price,"\u20ac"))}));return R?c.a.createElement(m.a,{to:"/success"}):c.a.createElement("div",{className:"payBloc content"},c.a.createElement(F.Elements,{stripe:Y},c.a.createElement("div",{className:"payment"},c.a.createElement(V,{setnewUser:S,setValidShowPayment:T}),I?c.a.createElement(J,{user:C,basket:r,orderID:O,totalCart:q,setPaymentValid:B}):null)),c.a.createElement("div",{className:"paymentCart",style:{display:"flex",justifyContent:"space-around"}},G,c.a.createElement("h5",{className:"h5marg"},"Your Order (",_," items)"),c.a.createElement("div",{className:"totalCartElments"},c.a.createElement("div",{className:"totalCartElmt L"},c.a.createElement("h5",{className:"h5marg"},"Order value :"),c.a.createElement("h5",{className:"h5marg"},"Shipping :"),c.a.createElement("h5",{className:"h5marg"},"TOTAL :")),c.a.createElement("div",{className:"totalCartElmt R"},c.a.createElement("h5",{className:"h5marg"},P(q),"\u20ac"),c.a.createElement("h5",{className:"h5marg"},"FREE"),c.a.createElement("h5",{className:"h5marg"},P(q),"\u20ac")))))})),K=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),r=a[0],l=a[1],s=Object(n.useState)(!1),d=Object(u.a)(s,2),p=d[0],b=d[1],h=f("user",[]),N=Object(u.a)(h,2),y=N[0],v=(N[1],Object(n.useState)({firstname:"",lastname:"",address:"",optional:"",zipcode:"",city:"",state:"",newsletter:"",email:"",gender:"",phone:"",compagnyname:"",billingaddress:"",billingoptional:"",billingzipcode:"",billingcity:"",billingstate:"",statut:"",inscription:"",birthday:"",orders:[]})),O=Object(u.a)(v,2),C=O[0],S=O[1];Object(n.useEffect)((function(){console.log("here-------",e),function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/api/getuser",e.next=3,fetch("/api/getuser",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"id=".concat(y)}).then((function(e){return e.json()})).then((function(e){var t=e.user.birthday;void 0!=t&&(t=new Date(t),console.log("je passse la ==========",t)),S({firstname:e.user.firstname,lastname:e.user.lastname,address:e.user.address,optional:e.user.optional,zipcode:e.user.zipcode,city:e.user.city,state:e.user.state,newsletter:e.user.newsletter,email:e.user.email,gender:e.user.gender,phone:e.user.phone,compagnyname:e.user.compagnyname,billingname:e.user.billingname,billingaddress:e.user.billingaddress,billingoptional:e.user.billingoptional,billingzipcode:e.user.billingzipcode,billingcity:e.user.billingcity,billingstate:e.user.billingstate,statut:e.user.statut,inscription:e.user.inscription,birthday:t,orders:e.user.orders}),void 0!=e.user.billingaddress&&l(!0)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[]);return p?c.a.createElement(m.a,{to:"/mysettings"}):"details"===e.match.params.form?c.a.createElement("div",{className:"settingsBloc content"},c.a.createElement("div",{className:"backToSearch set"},c.a.createElement(j.a,{className:"backArrow",icon:w.a}),c.a.createElement("h5",{className:"backSetting"},"Back to",c.a.createElement("a",{href:"/myaccount",className:""},"my Account"),"/",c.a.createElement("a",{href:"/mysettings",className:""},"my Settings "))),c.a.createElement("div",{className:"settingsdetails"},c.a.createElement("div",{className:"settingSubTitle"},c.a.createElement("h5",{className:"settingSubTitleDetailL"},"My Details")),c.a.createElement("form",{className:"settingsContent setForm",onSubmit:function(e){return function(e){e.preventDefault();fetch("/api/updateuserdetails",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"id=".concat(y,"&firstname=").concat(C.firstname,"&lastname=").concat(C.lastname,"&email=").concat(C.email,"&gender=").concat(C.gender,"&phone=").concat(C.phone,"&birthday=").concat(C.birthday)}).then((function(e){return e.json()})).then((function(e){console.log("retour du back === ",e.status),e.status?b(!0):console.log("erreur")}))}(e)}},c.a.createElement("label",null,"First Name *"),c.a.createElement("input",{className:"settingInput",type:"text",name:"firstname",onChange:function(e){return S(Object(g.a)({},C,{firstname:e.target.value}))},value:C.firstname,required:!0}),c.a.createElement("label",null,"Last Name *"),c.a.createElement("input",{className:"settingInput",type:"text",name:"lastname",onChange:function(e){return S(Object(g.a)({},C,{lastname:e.target.value}))},value:C.lastname,required:!0}),c.a.createElement("label",null,"Email *"),c.a.createElement("input",{className:"settingInput",type:"email",name:"email",onChange:function(e){return S(Object(g.a)({},C,{email:e.target.value}))},value:C.email,required:!0}),c.a.createElement("label",null,"Date of birth *"),c.a.createElement("input",{className:"settingInput",type:"date",name:"date",id:"dateDuJour",onChange:function(e){return S(Object(g.a)({},C,{birthday:e.target.value}))},valueAsDate:C.birthday,required:!0}),c.a.createElement("label",null,"Phone"),c.a.createElement("input",{className:"settingInput",type:"number",name:"phone",onChange:function(e){return S(Object(g.a)({},C,{phone:e.target.value}))},value:C.phone}),c.a.createElement("label",null,"Gender"),c.a.createElement("select",{className:"settingInput",name:"gender",onChange:function(e){return S(Object(g.a)({},C,{gender:e.target.value}))},required:!0},c.a.createElement("option",{value:C.gender},""!=C.gender?C.gender:"--"),c.a.createElement("option",{value:"Female"},"Female"),c.a.createElement("option",{value:"Male"},"Male")),c.a.createElement("div",{className:"setFormBtn"},c.a.createElement("input",{className:"button log",type:"submit",method:"post",value:"SAVE DETAILS"}),c.a.createElement(E.b,{to:"/mysettings",className:"cancel btnCancel"},"CANCEL"))))):"address"===e.match.params.form?c.a.createElement("div",{className:"settingsBloc content"},c.a.createElement("div",{className:"backToSearch set"},c.a.createElement(j.a,{className:"backArrow",icon:w.a}),c.a.createElement("h5",{className:"backSetting"},"Back to",c.a.createElement("a",{href:"/myaccount",className:""},"my Account"),"/",c.a.createElement("a",{href:"/mysettings",className:""},"my Settings "))),c.a.createElement("form",{className:"settingsdetails",onSubmit:function(e){return function(e){e.preventDefault();var t;t=r?"id=".concat(y,"&firstname=").concat(C.firstname,"&lastname=").concat(C.lastname,"&address=").concat(C.address,"&optional=").concat(C.optional,"&zipcode=").concat(C.zipcode,"&city=").concat(C.city,"&state=").concat(C.state,"&compagnyname=").concat(C.compagnyname,"&billingaddress=").concat(C.billingaddress,"&billingoptional=").concat(C.billingoptional,"&billingzipcode=").concat(C.billingzipcode,"&billingcity=").concat(C.billingcity,"&billingstate=").concat(C.billingstate):"id=".concat(y,"&firstname=").concat(C.firstname,"&lastname=").concat(C.lastname,"&address=").concat(C.address,"&optional=").concat(C.optional,"&zipcode=").concat(C.zipcode,"&city=").concat(C.city,"&state=").concat(C.state),fetch("/api/updateuseraddress",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t}).then((function(e){return e.json()})).then((function(e){console.log("retour du back === ",e.status),e.status?b(!0):console.log("erreur")}))}(e)}},c.a.createElement("div",{className:"settingSubTitle"},c.a.createElement("h5",{className:"settingSubTitleDetailL"},"My Addresses")),c.a.createElement("div",{className:"settingsContent setForm"},c.a.createElement("h5",null,"Shipping Address"),c.a.createElement("label",null,"Address"),c.a.createElement("input",{className:"settingInput",type:"text",name:"address",onChange:function(e){return S(Object(g.a)({},C,{address:e.target.value}))},value:C.address,required:!0}),c.a.createElement("label",null,"Optional"),c.a.createElement("input",{className:"settingInput",type:"text",name:"detail",onChange:function(e){return S(Object(g.a)({},C,{optional:e.target.value}))},value:C.optional}),c.a.createElement("label",null,"Zipcode"),c.a.createElement("input",{className:"settingInput",name:"zipcode",type:"text",pattern:"[0-9]*",onChange:function(e){return S(Object(g.a)({},C,{zipcode:e.target.value}))},value:C.zipcode,required:!0}),c.a.createElement("label",null,"City"),c.a.createElement("input",{className:"settingInput",type:"text",name:"city",onChange:function(e){return S(Object(g.a)({},C,{city:e.target.value}))},value:C.city}),c.a.createElement("label",null,"State"),c.a.createElement("input",{className:"settingInput",type:"text",name:"state",onChange:function(e){return S(Object(g.a)({},C,{state:e.target.value}))},value:C.state,required:!0}),c.a.createElement("h5",{className:"billingAddress",onClick:function(e){l(!r)}},r?"Billing Address (if different from Shipping)":"Add Billing Address"),c.a.createElement("div",{className:r?"display":"hide"},c.a.createElement("label",null,"Compagny Name (optional)"),c.a.createElement("input",{className:"settingInput",type:"text",name:"compagnyname",onChange:function(e){return S(Object(g.a)({},C,{compagnyname:e.target.value}))},value:C.compagnyname}),c.a.createElement("label",null,"Address"),c.a.createElement("input",{className:"settingInput",type:"text",name:"billingaddress",onChange:function(e){return S(Object(g.a)({},C,{billingaddress:e.target.value}))},value:C.billingaddress,required:!!r}),c.a.createElement("label",null,"Optional"),c.a.createElement("input",{className:"settingInput",type:"text",name:"detail",onChange:function(e){return S(Object(g.a)({},C,{billingoptional:e.target.value}))},value:C.billingoptional}),c.a.createElement("label",null,"Zipcode"),c.a.createElement("input",{className:"settingInput",name:"zipcode",type:"text",pattern:"[0-9]*",onChange:function(e){return S(Object(g.a)({},C,{billingzipcode:e.target.value}))},value:C.billingzipcode,required:!!r}),c.a.createElement("label",null,"City"),c.a.createElement("input",{className:"settingInput",type:"text",name:"city",onChange:function(e){return S(Object(g.a)({},C,{billingcity:e.target.value}))},value:C.billingcity}),c.a.createElement("label",null,"State"),c.a.createElement("input",{className:"settingInput",type:"text",name:"state",onChange:function(e){return S(Object(g.a)({},C,{billingstate:e.target.value}))},value:C.billingstate,required:!!r}))),c.a.createElement("div",{className:"setFormBtn"},c.a.createElement("input",{className:"button log",type:"submit",method:"post",value:"SAVE DETAILS"}),c.a.createElement(E.b,{to:"/mysettings",className:"cancel btnCancel"},"CANCEL")))):void 0},Q=function(e){var t=Object(n.useState)(!1),a=Object(u.a)(t,2),r=a[0],l=a[1],s=f("user",[]),d=Object(u.a)(s,2),p=d[0],b=(d[1],Object(n.useState)({current:"",new:"",confirm:""})),h=Object(u.a)(b,2),N=h[0],y=h[1],v=Object(n.useState)(!1),O=Object(u.a)(v,2),C=O[0],S=O[1],k=Object(n.useState)(!1),x=Object(u.a)(k,2),I=x[0],T=x[1];return r?c.a.createElement(m.a,{to:"/mysettings"}):c.a.createElement("div",{className:"settingsBloc content"},c.a.createElement("div",{className:"backToSearch set"},c.a.createElement(j.a,{className:"backArrow",icon:w.a}),c.a.createElement("h5",{className:"backSetting"},"Back to",c.a.createElement("a",{href:"/myaccount",className:""},"my Account"),"/",c.a.createElement("a",{href:"/mysettings",className:""},"my Settings "))),c.a.createElement("div",{className:"settingsdetails"},c.a.createElement("div",{className:"settingSubTitle"},c.a.createElement("h5",{className:"settingSubTitleDetailL"},"Change my Password")),c.a.createElement("form",{className:"settingsContent setForm",onSubmit:function(e){return function(e){(e.preventDefault(),N.confirm===N.new)?(S(!1),function(){var e=Object(i.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"/api/changepassword",fetch("/api/changepassword",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"id=".concat(p,"&current=").concat(N.current,"&new=").concat(N.new,"&confirm=").concat(N.confirm)}).then((function(e){return e.json()})).then((function(e){e.status?l(!0):T(!0)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()):S(!0);console.log(N)}(e)}},c.a.createElement("label",null,"Current Password *"),c.a.createElement("input",{className:"settingInput",type:"password",name:"oldpass",onChange:function(e){return y(Object(g.a)({},N,{current:e.target.value}))},value:N.current,required:!0}),c.a.createElement("label",null,"New Password *"),c.a.createElement("input",{className:"settingInput",type:"password",name:"newpass",onChange:function(e){return y(Object(g.a)({},N,{new:e.target.value}))},value:N.new,required:!0}),c.a.createElement("label",null,"Confirm New Password *"),c.a.createElement("input",{className:"settingInput",type:"password",name:"newpassverif",onChange:function(e){return y(Object(g.a)({},N,{confirm:e.target.value}))},value:N.confirm,required:!0}),c.a.createElement("div",{className:C?null:"hide"},c.a.createElement("span",{style:{color:"red"}},"Your password and confirmation password do not match ",c.a.createElement("br",null),"This form could not be submitted. Please review your information.")),c.a.createElement("div",{className:I?null:"hide"},c.a.createElement("span",{style:{color:"red"}},"Wrong Password")),c.a.createElement("div",{className:"setFormBtn"},c.a.createElement("input",{className:"button log",type:"submit",method:"post",value:"CHANGE PASSWORD"}),c.a.createElement(E.b,{to:"/mysettings",className:"cancel btnCancel"},"CANCEL")))))},$=a(21);var X=Object(d.b)(null,(function(e){return{newUser:function(t){console.log("je suis dans le NEW USER REDUCER",t),e({type:"setUser",user:t})}}}))((function(e){var t=f("user",""),a=Object(u.a)(t,2),n=a[0];a[1];return y(n)?c.a.createElement("div",{className:"content"},c.a.createElement("form",{className:"form logoutBloc"},c.a.createElement("h2",null,"Congrats ! You're purchase is now on the way !"),c.a.createElement(E.b,{to:"/products"},"Back to Shopping"),c.a.createElement(E.b,{to:"/myaccount"},"See my order"),c.a.createElement("img",{className:"slide logout",id:"homeSlide0",src:"homepic8.jpg"}))):c.a.createElement("div",{className:"content"},c.a.createElement("form",{className:"form logoutBloc"},c.a.createElement("h2",null,"Congrats ! You're purchase is now on the way !"),c.a.createElement(E.b,{to:"/products"},"Back to Shopping"),c.a.createElement(E.b,{to:"/signin"},"Create an account"),c.a.createElement("img",{className:"slide logout",id:"homeSlide0",src:"homepic8.jpg"})))}));$.b.add(C.d);var ee=Object(d.b)((function(e){return console.log("APP get store",e),{userName:e.user,count:e.count}}),(function(e){return{newUser:function(t){console.log("je suis dans le NEW USER REDUCER",t),e({type:"setUser",user:t})},newCount:function(t){console.log("je suis dans le NEW COUNT REDUCER",t),e({type:"setCount",count:t})},newBasket:function(t){console.log("je suis dans le NEW BASKET REDUCERS",t),e({type:"updateBasket",basket:t})},newOrder:function(t){console.log("je suis dans le NEW ORDER REDUCER",t),e({type:"setOrder",order:t})}}}))((function(e){var t=f("user",""),a=Object(u.a)(t,2),r=a[0],l=(a[1],f("order","")),s=Object(u.a)(l,2),d=s[0],g=(s[1],Object(n.useState)([])),h=Object(u.a)(g,2),j=(h[0],h[1]),w=Object(n.useState)(""),C=Object(u.a)(w,2),P=(C[0],C[1],Object(n.useState)(0)),A=Object(u.a)(P,2),q=A[0],F=A[1];return Object(n.useEffect)((function(){e.newOrder(d),e.newUser(r),function(){var t=Object(i.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"/api/get-order-and-user-from-storage",t.next=3,fetch("/api/get-order-and-user-from-storage",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"order=".concat(d,"&user=").concat(r)}).then((function(e){return e.json()})).then(function(){var t=Object(i.a)(o.a.mark((function t(a){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j(a.basket);case 2:return t.next=4,e.newBasket(a.basket);case 4:return t.next=6,e.newCount(N(a.basket));case 6:return t.next=8,F(N(a.basket));case 8:return t.next=10,localStorage.setItem("count",JSON.stringify(N(a.basket)));case 10:if(!y(a.orderID)){t.next=13;break}return t.next=13,localStorage.setItem("order",JSON.stringify(a.orderID));case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()(),e.newCount(q)}),[]),y(e.userName)?(console.log("je passe dans le if APP",e.userName),c.a.createElement("div",{className:"App"},c.a.createElement(E.a,null,c.a.createElement(m.d,null,c.a.createElement("div",null,c.a.createElement(S,{count:e.count,user:y(e.userName)}),c.a.createElement(m.b,{path:"/",exact:!0,component:x}),c.a.createElement(m.b,{path:"/products",component:p}),c.a.createElement(m.b,{path:"/form",component:b}),c.a.createElement(m.b,{path:"/signout",component:O}),c.a.createElement(m.b,{path:"/signin",component:v}),c.a.createElement(m.b,{path:"/change",component:k}),c.a.createElement(m.b,{path:"/about",component:I}),c.a.createElement(m.b,{path:"/collection",component:T}),c.a.createElement(m.b,{path:"/cart",component:D}),c.a.createElement(m.b,{path:"/prodcard/:id",component:R}),c.a.createElement(m.b,{path:"/contact",component:B}),c.a.createElement(m.b,{path:"/checkout",component:L}),c.a.createElement(m.b,{path:"/shippinginfo",component:z}),c.a.createElement(m.b,{path:"/signout",component:O}),c.a.createElement(m.b,{path:"/myaccount",component:U}),c.a.createElement(m.b,{path:"/payment",component:Z}),c.a.createElement(m.b,{path:"/mysettings",component:H}),c.a.createElement(m.b,{path:"/settingsform/:form",component:K}),c.a.createElement(m.b,{path:"/updatepass",component:Q}),c.a.createElement(m.b,{path:"/success",component:X})))))):(console.log("je passe dans le else APP",e.userName),c.a.createElement("div",{className:"App"},c.a.createElement(E.a,null,c.a.createElement(m.d,null,c.a.createElement("div",null,c.a.createElement(S,{count:e.count,user:y(e.userName)}),c.a.createElement(m.b,{path:"/",exact:!0,component:x}),c.a.createElement(m.b,{path:"/products",component:p}),c.a.createElement(m.b,{path:"/form",component:b}),c.a.createElement(m.b,{path:"/signout",component:O}),c.a.createElement(m.b,{path:"/signin",component:v}),c.a.createElement(m.b,{path:"/change",component:k}),c.a.createElement(m.b,{path:"/about",component:I}),c.a.createElement(m.b,{path:"/collection",component:T}),c.a.createElement(m.b,{path:"/cart",component:D}),c.a.createElement(m.b,{path:"/prodcard/:id",component:R}),c.a.createElement(m.b,{path:"/contact",component:B}),c.a.createElement(m.b,{path:"/checkout",component:L}),c.a.createElement(m.b,{path:"/shippinginfo",component:z}),c.a.createElement(m.b,{path:"/payment",component:Z}),c.a.createElement(m.b,{path:"/success",component:X}))))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var te=a(20),ae=Object(te.c)(Object(te.b)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return"setUser"===t.type?(console.log(t.user),t.user):e},basket:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return"setBasket"===t.type?(e.push(t.basket),e):"updateBasket"===t.type?(console.log("updateBasket =========",t.basket),t.basket):"deleteBasket"===t.type?t.basket:e},count:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return"setCount"===t.type?t.count:e},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;return"setOrder"===t.type&&y(t.order)?t.order:e}}));l.a.render(c.a.createElement(d.a,{store:ae},c.a.createElement(ee,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[32,1,2]]]);
//# sourceMappingURL=main.4e0f51e6.chunk.js.map